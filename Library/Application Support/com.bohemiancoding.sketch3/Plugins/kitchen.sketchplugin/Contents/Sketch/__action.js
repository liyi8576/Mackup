var globalThis=this,global=this;function __skpm_run(key,context){globalThis.context=context;try{var exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=66)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){t.exports=require("sketch/dom")},function(t){t.exports=JSON.parse('{"RUN_ON_DOCUMENT_OPEN":true,"LANG":"zh_cn","AUTO_ARRANGE":true,"FIRST_ARRANGE":1,"I18N":{"zh_cn":"简体中文","en_us":"English"},"ID":"com.alipay.kitchen","NS":"plugin.sketch.kitchen.public","HOME_PAGE":"https://www.yuque.com/yuque/help/kitchen-changelog","REPORT_URL":"https://www.yuque.com/yuque/topics","HELP_URL":"https://www.yuque.com/yuque/help/koe3wi","PROMOTE_URL":"https://seeconf.antfin.com?from=kitchen","INTERNAL":false,"LARK_BASE_URL":"https://www.yuque.com","DONE_BASE_URL":"https://done.alibaba-inc.com","DONE_AUTH_EXPIRE":2592000,"APPCAST_URL":"https://kitchen.alipay.com/appcast.xml","RELEASE_NOTE_URL":"https://kitchen.alipay.com/release-note.json","AUTHOR":"AFX","NAME":"Kitchen","TRACK_URL":"https://render.alipay.com/p/s/home"}')},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){t.exports=r(33)},function(t,e,r){var n=r(42),o=r(21),i=r(60),a=r(64);t.exports=function(t,e,r){t=a(t);var s=(e=i(e))?o(t):0;return e&&s<e?n(e-s,r)+t:t}},function(t){t.exports=JSON.parse('{"common":{"Authorization failed, please try again":"授权失败，请重试","Successfully authorized":"授权成功","Network Error":"网络错误","Please select the enterprise space to be associated":"请选择需要关联的企业空间","Can\'t find the page":"无法找到页面","The authorization request is abnormal, please contact the administrator":"授权请求异常，请联系管理员","Install Kitchen-Lite now?":"是否立即安装 Kitchen 精简版？","Kitchen is not compatible with your current system version:":"Kitchen 不兼容您当前的系统版本：","Ok":"确定","Cancel":"取消","Start":"开始使用","Prepare for downloading Kitchen-Lite...":"准备下载 Kitchen 精简版...","Kitchen-Lite downloaded":"完成下载精简版 Kitchen","Kitchen-Lite installed, please restart Sketch":"精简版 Kitchen 安装完成，请重启 Sketch","Can\'t find object \'GCRect\'":"GCRect 对象不存在！","GCRect does not contain \'size\' or \'origin\' attribute!":"GCRect 不包含 size 或 origin 属性！","Failed to get appsecret":"获取 appsecret 失败","Failed to restart Sketch, to use the formal edition Kitchen, please try again manually":"自动重启 Sketch 失败，请手动重启以使用正式版 Kitchen","Library imported":"🐛 导入 Library 完毕","Kitchen-Lite is not compatible with your system, please upgrade to macOS 10.11.3 or above":"Kitchen Lite 不支持的系统\', \'请升级至 macOS 10.11.3 及以上版本","Kitchen reloaded!":"Kitchen 已重载！","Group":"分组","Repos":"语雀画板","Update list":"刷新列表","Filter repos":"筛选画板知识库","Filter groups":"筛选画板组","Artboard":"画板","Yuque repos list updated!":"语雀画板知识库列表更新成功！","Artboards list updated":"画板列表已更新","Authorizing":"授权中","Please select artboards":"选择 Artboard 后才能上传","Upload":"上传到语雀画板","New group":"新建分组","Yuque params is missing":"缺少语雀所需参数，请重新添加此类目","Get Yuque artboards failure":"获取语雀画板数据失败","Get Yuque artboards failure, please auth Yuque":"获取语雀画板数据失败，请重新授权","Goto Yuque":"跳转到语雀","Current repos":"当前知识库","Check":"查看上传文件","Learn more":"了解更多","Already auth to Yuque":"已授权","Need":"需要","Yuque Auth":"语雀授权","enable this function":"开启此功能","Please input meaningful name":"请输入一个有意义的填充卡片名称","Please select image source":"请选择图片填充来源","New Group":"新建分组","New Repo":"新建画板知识库","No Group":"暂无分组，请在语雀新建分组","Canceling":"取消中...","Upload canceled":"上传已取消","LOADING":"载入中","Initial load may take a while":"初次载入可能较慢，请耐心等待","Copy successfully":"复制成功，分享给其他协作者！"},"checkForUpdate":{"New version of Kitchen is released":"新版本的 Kitchen 已经发布","is ready to update, your current version is":"可供更新，您现在的版本是",". Do you want to update right now?":"。立即更新？","Please restart sketch after update kitchen.":"更新后请重启 Sketch。","⚠️ You just install new version of Kitchen, try restart Sketch before using it.":"⚠️ 你可能刚刚更新过 kitchen，请重启 sketch 后再打开插件。","Update":"更新","Cancel":"取消","🌟 New features:":"🌟🌟🌟🌟🌟 新增功能 🌟🌟🌟🌟🌟","🐛 Fixed issues:":"🐛🐛🐛🐛🐛 修复问题 🐛🐛🐛🐛🐛"},"component":{"Please do not select multiple layers at the same time":"请不要同时选择多个图层","Please select Artboad or Group as the target container for the layer generation":"请选择 Artboad 或者 Group 作为图层生成的目标容器","Layer generation failed! Please try again":"图层生成失败! 请重试","Layer generated!":"图层生成成功！","The generated layer has been added to current page":"生成的图层已添加到当前 page 下","An error occurred, info:":"发生错误，错误信息：","Cancel":"取消","Reset":"重置","Back Home":"返回首页","Generate":"生成","Component Generator":"组件生成器","Element config":"元素配置","Preview":"预览","Origin data":"原始数据","Editing Mode":"切换数据编辑","Preview Mode":"预览完整展示","Size":"尺寸","Width":"宽度","table":"表格","button":"按钮","pagination":"分页"},"logout":{"Sure to cancel authorization of Yuque?":"确认注销语雀授权登录？","Some features will not work":"部分功能将无法使用","Sure to cancel authorization of Iconfont?":"确认注销 Iconfont 授权登录？","\\"Manage my icons\\" will not work":"\\"我的图标管理\\"功能将无法使用","Sure to cancel authorization of D-One?":"确认注销 D-One 授权登录？","Ok":"确定","Cancel":"取消","⚠️ You have canceled authorization of Iconfont!":"⚠️ 您已取消 Iconfont 授权！","⚠️ You have canceled authorization of Yuque!":"⚠️ 您已取消语雀授权！","⚠️ You have canceled authorization of D-One!":"⚠️ 您已取消D-One授权！"},"palette":{"Default group":"默认分组","Click the swatch to fill color":"选择图层并点击色板来填充颜色","🛎 Please select one Shape or Text layer to fill color at least! Color copied to clipboard":"🛎 请至少选中一个 Shape 或者 Text 图层来填充色彩！颜色已复制到剪切板","🎉 The layer is filled and the color is copied to the clipboard":"🎉 填充图层完毕，且颜色已复制到剪切板","Boutique palette":"精选色板","My palette":"我的色板","Sure to delete this color block?":"你确定删除这个色块吗？","Ok":"确定","Save":"保存","Cancel":"取消","Color name":"颜色名称","Color name (optional)":"颜色名称（可选）","Input palette name please":"请输入色板名称","Palette name is required":"色板名称不能为空","Already exist in current group":"已经在当前分组下存在","Color edit failed":"编辑颜色失败","Color delete failed":"删除颜色失败","Duplicate group name":"分组名称已存在","Group name is required":"分组名称不能为空","All groups":"所有分组","Delete":"删除","group successfully":"分组成功","Input search content Please":"请输入搜索内容","Sorry, not found":"抱歉，没有找到","related info":"相关内容","Edit palette":"编辑色板","Delete all palette group in this group?":"删除此分组下所有色板？","New palette group":"新建色板分组","Incorrect group name":"分组名称不正确"},"resource":{"Iconfont":"Iconfont 图标","Requested data empty!":"请求数据为空！","Network error, please reset after Kitchen reload":"网络错误，请重载 Kitchen 后重置","Sorry, not found":"抱歉，没有搜索到","related info":"相关内容","Input key words please...":"请输入关键字进行全站搜索...","Icon":"图标","Icon Library":"图标库","Search in my icon libraries":"搜索我的图标库","Manage my icon libraries":"我的图标库","No content yet":"暂时没有内容","My projects":"我的项目","Joined projects":"我参与的项目","Search icons in the project":"搜索项目下的图标","Project":"项目","Search in my icons":"搜索我的图标","Manage my icons":"我的图标","Favorited":"收藏","Favorited icons":"收藏的图标","Favorited libraries":"收藏的图标库","Search in my collections":"搜索我的收藏","Manage my collections":"前往我的收藏","Visit Iconfont homepage":"前往 Iconfont 官网","Iconfont authorize":"授权登录 Iconfont","If shows uuid illegal, please login at iconfont.cn ahead and come back to authorize":"如果授权页面显示 uuid 非法，请访问 iconfont.cn 并在浏览器上登录后再回来进行授权操作","Quickly search and use icon and drag it directly to Sketch for modification and use":"快速搜索和调用 Iconfont 的图标，直接拖拽到 Sketch 上进行修改和使用","go to":"前往","website":"官网","Search for more icon libraries":"搜索更多图标库","Asset Imported":"拖入成功"},"setting":{"Kitchen Settings":"Kitchen 设置","Current version":"当前版本","Language":"展示语言","Default display":"默认展示","Developer mode":"开发者模式","Save":"保存设置","Cancel":"取消","Ok":"确定","Settings saved":"保存设置成功","Restart Sketch right now?":"是否立即重启 Sketch ？","Kitchen\'s settings have been saved!":"Kitchen 设置项已被保存",", can take effect after restart":"，重启后生效","Check Updates":"检查更新","New Update":"有新版本","Settings will take effect after restart Sketch.":"设置将在重启 Sketch 后生效"},"toolbar":{"Sketch 49 can\'t support open Kitchen toolbar now":"Sketch 49 暂时不支持开启 Kitchen 工具栏","You can use the feature by calling command through Menu -> Plugins -> Kitchen":"你可以通过 Menu -> Plugins -> Kitchen 调用命令使用功能","Ok":"确定","Upload Artboard":"画板上传","Symbol Sync":"Symbol 同步","Iconfont Icons":"Iconfont 图标","Design Assets":"设计资产","Data Fill":"数据填充","Auto Arrange":"自动排版","Color Palette":"色板","Chart Generator":"图表生成","Help and Feedback":"帮助和反馈","Promote":"设计资讯","Kitchen Settings":"Kitchen 设置"},"yuque":{"Authorized Login":"授权登录语雀","See detailed tutorial":"查看详细教程","SignUp Account":"注册语雀账号","Incorrect data":"空间数据有误","I’m very sorry, you are not in this space yet":"非常抱歉，你所在的语雀空间暂未开通此功能","We are working hard to open up - so stay tuned!":"我们正在努力开拓中～敬请期待！","Uploaded":"上传成功","Copy link":"复制链接","There may be a delay on the server side":"语雀端更新可能存在一定的延迟","Public space":"公共空间","Yuque service interface is lost, please contact the developer":"语雀服务接口丢失，请联系开发者","D-One service interface is lost, please contact the developer":"D-One服务接口丢失，请联系开发者","Network error, please try again":"网络错误，请重试","Upload failed":"上传失败","Go Back":"返回上一步","Yuque repos not found":"暂无语雀画板知识库","Go to create":"前往新建","Yuque - Artboard upload":"画板上传","Selected artboards":"已选择的 Artboards","All artboards in current page":"当前 Page 所有 Artboards","After \'New group\' executed successfully,<br /> a new group named with current page<br /> will be created in Yuque repo":"选择『新建』成功后，<br />会在语雀画板知识库新建一个以<br />当前 page 命名的分组","Exported symbol list updated!":"Symbols 导出列表更新成功！","Imported symbol list updated!":"Symbols 导入列表更新成功！","Failed to export:":"导出失败：","Failed to import:":"导入失败：","Successfully exported":"导出成功","Successfully imported":"导入成功","Symbol list":"Symbol 列表","Resources":"选择源","Boutique library":"精选库","Private library":"私有库","Import":"导入到 Sketch Libraries","Preparing...":"准备中...","Resource downloading...":"下载数据源中...","Request failed! Url:":"请求失败！地址：","Resource loading...":"读取数据源中...","Import Symbol":"Symbol 导入","Export Symbol":"Symbol 导出","Symbol importing...":"Symbol 导入中...","File is missing, please try again":"文件丢失，请重试","Error occurred during the import":"导入过程中发生错误","No exportable symbol exist in current file!":"当前文档无可导出的 Symbol！","Symbol belongs to unreachable library":"Symbol 属于无法访问的 Library","Error occurred copying .sketch file!":"拷贝 .sketch 文件出错！","Preparing for resolve...":"准备解析...","Please save current file first":"请先保存当前文档","Ready to resolve...":"将要解析...","Resolving...":"正在解析中...","Packaging result...":"正在打包结果...","The file is too large, try to split the upload":"文件过大，请尝试拆分上传","Resolving destination...":"解析上传目的地地址","File uploading...":"上传文件中...","Resolving upload result...":"解析上传结果","Uploading Assets...":"作为资产包上传","Check Stauts...":"检查状态","File upload failed, please contact the developer":"文件上传失败，请联系开发者","Export completed":"导出完成","Upload failed, please check the network and try agian":"上传失败，请检查网络并重试","Permission expired, please re-authorize":"权限过期，请重新授权","Server error, please contact Kitchen team":"服务端错误，请联系 Kitchen 团队","Upload file is too large, limited to 300MB":"上传文件过大，源文件限制 300MB","Sketch template folder is not found":"Sketch 模板存放文件夹不存在","File size exceeds single file size limit":"超出单个文件大小限制","Yuque space is not enough":"语雀可用空间不足","Error 400":"错误 400","Upload to Yuque":"上传到语雀","Upload to D-One":"上传到D-One","Please select artboards":"请选择要导出的画板","Select all artboards":"全选所有画板","Project group":"项目分组","Project":"项目","Category":"分类","Filename":"文件名","Upload Sketch file":"同时上传Sketch源文件","Overwrite file with same name":"覆盖同名zip文件","Last modified":"上次修改时间","Creator":"创建者","Involved Projects":"参与的项目","Created Projects":"创建的项目","Subscribed Projects":"订阅的项目"},"fill":{"Other image is filling...":"其它图片正在填充中...","Need Yuque Auth":"需要语雀授权","Auth Yuque get more function":"授权语雀开启更多功能","Downloading the images...":"下载图片中...","Fill success":"填充完成","Unsplash photo by":"Unsplash 图片来自","YMD":"年月日","Y-M-D":"年-月-日","Y/M/D":"年/月/日","Cellphone":"手机号码","Telephone":"座机号码","Name":"名称","name":"名称","ZH":"中文","EN":"英文","Simplified":"简写","Chinese name":"中文名","English name":"英文名","Data":"数据","Data Fill":"数据填充","decimals":"小数","percent":"百分比","Prefix":"前缀","Coming Soon":"敬请期待","There have not image can be fill in current floder":"当前文件夹下没有可填充的图片","Please select at least one of Shape for fill":"请选择至少一个 Shape 图层进行填充","Please select at least one of Text for fill":"请选择至少一个文本图层进行填充","Deletion cannot be retrieved, are you sure ?":"删除内容无法找回，确定删除吗？","Fetch image failure, please check your network":"获取图片资源失败，请检查你的网络","Article":"长文本","Alituhua":"阿里土话","designSaying":"设计大家说","Address":"地址","Country":"国家和地区","Province":"省份","City":"城市","Time":"时间","Date":"日期","Week":"星期","Month":"月份","Mail":"邮件","Phone":"电话","avatar":"头像","others":"其他","customized":"自定义","Asian Avatar":"东亚写真","Western Avatar":"欧美写真","Unsplash Faces":"Unsplash Faces","Unsplash Office":"Unsplash Office","Logo":"品牌","Flat Portrait":"扁平人物","Game Portrait":"游戏","Graffiti":"涂鸦","Q Avatar":"Q版人物","Cartoon":"卡通","Name already exist":"名称已存在","Name illegal":"名称不合法","Deleted success":"删除成功","Added success":"新建成功","Updated success":"更新成功","Image Manager":"图片管理","New Text":"新建文本","Text Manager":"文本管理","Local floder":"本地文件夹","Yuque Artboard":"语雀画板","Save":"保存","Pick floder":"选择文件夹","Text":"文本","Image":"图片","New Image":"新建图片","Preserve Order":"保持顺序","Paste text here, break line to split":"请输入文本，换行实现分割填充","asian":"东亚人","western":"欧美人","License":"使用许可说明"},"arrange":{"Smart Arrangement":"自动排版","See newbie tutorials and learn how to use it quickly":"查看新手教程，快速学习自动排版功能","Spacing":"间距","Padding":"边距","auto":"自动排版","Please select some layers":"请选择图层","Please select at least two layers or one grouping":"请选择至少两个图层或一个分组","The selected object must contain at least a Shape or an Image":"所选对象至少包含一个 Shape 或一个 Image","Please select the same level of layers":"请选择同一层级下的图层","Successfully lifted the top padding!":"解除上边距成功","Successfully lifted the right padding!":"解除右边距成功","Successfully lifted the bottom padding!":"解除下边距成功","Successfully lifted the left padding!":"解除左边距成功","Successfully lifted the horizontal spacing!":"解除水平间距成功","Successfully lifted the vertical spacing!":"解除垂直间距成功","Disengage the paddings":"解除边距一致","Locking paddings are consistent":"锁定边距一致","Check out the tutorial":"查看教程","Enter directly":"直接进入自动排版"},"designassets":{"Design Assets":"设计资产","Asset Imported":"拖入成功"}}')},function(t,e,r){var n=r(44).Symbol;t.exports=n},function(t,e){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return r.test(t)}},function(t,e,r){var n=r(27),o=r(28),i=r(15),a=r(29);t.exports=function(t){return n(t)||o(t)||i(t)||a()}},function(t,e){t.exports=require("sketch/ui")},function(t,e){function r(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){r(a,o,i,s,c,"next",t)}function c(t){r(a,o,i,s,c,"throw",t)}s(void 0)}))}}},function(module,exports){module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(t,e){var r=t in handlers;if(ivars[t]=e,!r){delegateClassDesc.addInstanceVariableWithName_typeEncoding(t,"@");var n=MOPropertyDescription.new();n.name=t,n.typeEncoding="@",n.weak=!0,n.ivarName=t,delegateClassDesc.addProperty(n)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(t){var e=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(t){e[t]=ivars[t]})),Object.keys(t||{}).forEach((function(r){e[r]=t[r]})),e},this.new=this.getClassInstance,"object"==typeof definition&&Object.keys(definition).forEach((function(t){"function"==typeof definition[t]?setHandlerForSelector(t,definition[t]):setIvar(t,definition[t])})),delegateClassDesc.registerClass()}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},function(t,e,r){var n=r(14);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:a,prop:l}),r.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(o){return n}},encode:function(t,e,r){if(0===t.length)return t;var n=t;if("symbol"==typeof t?n=Symbol.prototype.toString.call(t):"string"!=typeof t&&(n=String(t)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",a=0;a<n.length;++a){var s=n.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=n.charAt(a):s<128?o+=i[s]:s<2048?o+=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?o+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(a)),o+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(o(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,i){if(!r)return e;if("object"!=typeof r){if(o(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var s=e;return o(e)&&!o(r)&&(s=a(e,i)),o(e)&&o(r)?(r.forEach((function(r,o){if(n.call(e,o)){var a=e[o];a&&"object"==typeof a&&r&&"object"==typeof r?e[o]=t(a,r,i):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var a=r[o];return n.call(e,o)?e[o]=t(e[o],a,i):e[o]=a,e}),s)}}},function(t,e,r){"use strict";(function(t){var n=r(35),o=r(36),i=r(37);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),o=(t=s(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(u(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return _(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function S(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,o){var i,a=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var u=-1;for(i=r;i<s;i++)if(l(t,i)===l(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var f=!0,h=0;h<c;h++)if(l(t,i+h)!==l(e,h)){f=!1;break}if(f)return i}return-1}function v(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return z(B(e,t.length-r),t,r,n)}function E(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return E(t,e,r,n)}function N(t,e,r,n){return z(W(e),t,r,n)}function O(t,e,r,n){return z(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function _(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,s,c,l=t[o],u=null,f=l>239?4:l>223?3:l>191?2:1;if(o+f<=r)switch(f){case 1:l<128&&(u=l);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(c=(15&l)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,f=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return l(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return u(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(i,a),l=this.slice(n,o),u=t.slice(e,r),f=0;f<s;++f)if(l[f]!==u[f]){i=l[f],a=u[f];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return S(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return S(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return E(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return N(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function P(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=M(t[i]);return o}function x(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function L(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function C(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function j(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||j(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,i){return i||j(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);I(this,t,e,r,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);I(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=c.isBuffer(t)?t:B(new c(t,n).toString()),s=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var k=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function W(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(18))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(8),o=r(46),i=r(47),a=r(20),s=n?n.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},function(t,e,r){var n=r(48),o=r(51);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},function(t,e,r){var n=r(54),o=r(9),i=r(56);t.exports=function(t){return o(t)?i(t):n(t)}},function(t,e,r){var n=r(30),o=r(31),i=r(15),a=r(32);t.exports=function(t,e){return n(t)||o(t,e)||i(t,e)||a()}},function(t,e,r){"use strict";var n=r(16),o=r(34),i=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Array.isArray,c=Array.prototype.push,l=function(t,e){c.apply(t,s(e)?e:[e])},u=Date.prototype.toISOString,f=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},p=function t(e,r,o,i,a,c,u,f,p,d,g,y,S){var m,v=e;if("function"==typeof u?v=u(r,v):v instanceof Date?v=d(v):"comma"===o&&s(v)&&(v=n.maybeMap(v,(function(t){return t instanceof Date?d(t):t})).join(",")),null===v){if(i)return c&&!y?c(r,h.encoder,S,"key"):r;v=""}if("string"==typeof(m=v)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||n.isBuffer(v))return c?[g(y?r:c(r,h.encoder,S,"key"))+"="+g(c(v,h.encoder,S,"value"))]:[g(r)+"="+g(String(v))];var b,E=[];if(void 0===v)return E;if(s(u))b=u;else{var w=Object.keys(v);b=f?w.sort(f):w}for(var N=0;N<b.length;++N){var O=b[N],_=v[O];if(!a||null!==_){var A=s(v)?"function"==typeof o?o(r,O):r:r+(p?"."+O:"["+O+"]");l(E,t(_,A,o,i,a,c,u,f,p,d,g,y,S))}}return E};t.exports=function(t,e){var r,n=t,c=function(t){if(!t)return h;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==t.format){if(!i.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=o.formatters[r],a=h.filter;return("function"==typeof t.filter||s(t.filter))&&(a=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===t.allowDots?h.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,delimiter:void 0===t.delimiter?h.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h.encode,encoder:"function"==typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:a,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);"function"==typeof c.filter?n=(0,c.filter)("",n):s(c.filter)&&(r=c.filter);var u,f=[];if("object"!=typeof n||null===n)return"";u=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var d=a[u];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var g=0;g<r.length;++g){var y=r[g];c.skipNulls&&null===n[y]||l(f,p(n[y],y,d,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var S=f.join(c.delimiter),m=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),S.length>0?m+S:""}},function(t,e,r){var n;try{n=r(17).Buffer}catch(o){}t.exports=function(t,e){if("object"!=typeof t||t.isKindOfClass&&t.isKindOfClass(NSString)||(t=(e=t).url),e=e||{},!t)return Promise.reject("Missing URL");var r;try{r=coscript.createFiber()}catch(o){coscript.shouldKeepAround=!0}return new Promise((function(i,a){var s=NSURL.alloc().initWithString(t),c=NSMutableURLRequest.requestWithURL(s);if(c.setHTTPMethod(e.method||"GET"),Object.keys(e.headers||{}).forEach((function(t){c.setValue_forHTTPHeaderField(e.headers[t],t)})),e.body){var l;if("string"==typeof e.body)l=NSString.alloc().initWithString(e.body).dataUsingEncoding(4);else if(n&&n.isBuffer(e.body))l=e.body.toNSData();else if(e.body.isKindOfClass&&1==e.body.isKindOfClass(NSData))l=e.body;else if(e.body._isFormData){var u=e.body._boundary;(l=e.body._data).appendData(NSString.alloc().initWithString("--"+u+"--\r\n").dataUsingEncoding(4)),c.setValue_forHTTPHeaderField("multipart/form-data; boundary="+u,"Content-Type")}else{l=NSJSONSerialization.dataWithJSONObject_options_error(e.body,1,void 0),c.setValue_forHTTPHeaderField(""+l.length(),"Content-Length")}c.setHTTPBody(l)}if(e.cache)switch(e.cache){case"reload":case"no-cache":case"no-store":c.setCachePolicy(1);break;case"force-cache":c.setCachePolicy(2);break;case"only-if-cached":c.setCachePolicy(3)}e.credentials||c.setHTTPShouldHandleCookies(!1);var f=!1,h=NSURLSession.sharedSession().dataTaskWithRequest_completionHandler(c,__mocha__.createBlock_function('v32@?0@"NSData"8@"NSURLResponse"16@"NSError"24',(function(t,e,s){r?r.cleanup():coscript.shouldKeepAround=!1,f=!0;try{if(s){var c=new TypeError(String("function"==typeof s.localizedDescription?s.localizedDescription():s));return void a(c)}i(function t(e,r){for(var o,i=[],a=[],s={},c=0;c<e.allHeaderFields().allKeys().length;c++){var l=e.allHeaderFields().allKeys()[c].toLowerCase(),u=String(e.allHeaderFields()[l]);i.push(l),a.push([l,u]),o=s[l],s[l]=o?o+","+u:u}return{ok:1==(e.statusCode()/200|0),status:Number(e.statusCode()),statusText:String(NSHTTPURLResponse.localizedStringForStatusCode(e.statusCode())),useFinalURL:!0,url:String(e.URL().absoluteString()),clone:t.bind(this,e,r),text:function(){return new Promise((function(t,e){const n=String(NSString.alloc().initWithData_encoding(r,1));n?t(n):e(new Error("Couldn't parse body"))}))},json:function(){return new Promise((function(t,e){var n=String(NSString.alloc().initWithData_encoding(r,4));n?t(JSON.parse(n)):e(new Error("Could not parse JSON because it is not valid UTF-8 data."))}))},blob:function(){return Promise.resolve(r)},arrayBuffer:function(){return Promise.resolve(n.from(r))},headers:{keys:function(){return i},entries:function(){return a},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}}(e,t))}catch(o){a(o)}})));h.resume(),r&&r.onCleanup((function(){f||h.cancel()}))}))}},function(t,e,r){var n,o;try{n=r(17).Buffer}catch(a){}try{o=r(38)}catch(a){}var i="Boundary-"+NSUUID.UUID().UUIDString();t.exports=function(){var t=NSMutableData.data();return{_boundary:i,_isFormData:!0,_data:t,append:function(e,r){if(t.appendData(NSString.alloc().initWithString("--"+i+"\r\n").dataUsingEncoding(4)),t.appendData(NSString.alloc().initWithString('Content-Disposition: form-data; name="'+e+'"').dataUsingEncoding(4)),o?o.isString(r):"string"==typeof r)t.appendData(NSString.alloc().initWithString("\r\n\r\n"+r).dataUsingEncoding(4));else{if(!(r&&r.fileName&&r.data&&r.mimeType))throw new Error("unknown value type");var a;if(n&&n.isBuffer(r.data))a=r.data.toNSData();else{if(!r.data.isKindOfClass||1!=r.data.isKindOfClass(NSData))throw new Error("unknown data type");a=r.data}t.appendData(NSString.alloc().initWithString('; filename="'+r.fileName+'"\r\nContent-Type: '+r.mimeType+"\r\n\r\n").dataUsingEncoding(4)),t.appendData(a)}t.appendData(NSString.alloc().initWithString("\r\n").dataUsingEncoding(4))}}}},function(t,e,r){"use strict";t.exports=t=>Object.keys(t).map(e=>t[e])},function(t,e,r){var n=r(14);t.exports=function(t){if(Array.isArray(t))return n(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r,n){var o=e&&e.prototype instanceof u?e:u,i=Object.create(o.prototype),a=new w(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=v(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=s;var l={};function u(){}function f(){}function h(){}var p={};p[o]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(N([])));g&&g!==e&&r.call(g,o)&&(p=g);var y=h.prototype=u.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,s){var l=c(t[o],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,v(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function N(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=y.constructor=h,h.constructor=f,h[a]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},S(m.prototype),m.prototype[i]=function(){return this},t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(y),y[a]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=N,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(16),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports=i.assign({default:a.RFC3986,formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return String(t)}}},a)},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),a=n[0],s=n[1],c=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),u=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===s&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,c[u++]=255&e);1===s&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=0,s=r-o;a<s;a+=16383)i.push(u(t,a,a+16383>s?s:a+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],o[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,l=c>>1,u=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+t[e+f],f+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+t[e+f],f+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=l}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,c,l=8*i-o-1,u=(1<<l)-1,f=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=u?(s=0,a=u):a+f>=1?(s=(e*c-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!S(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}})),c=n[r];r<i;c=n[++r])g(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,a={};function s(t,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),u(n,t,n.depth)}function c(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function l(t,e){return t}function u(t,r,n){if(t.customInspect&&r&&N(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return S(o)||(o=u(t,o,n)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(S(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,r);if(i)return i;var a=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),w(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(r);if(0===a.length){if(N(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return t.stylize(Date.prototype.toString.call(r),"date");if(w(r))return f(r)}var l,b="",O=!1,_=["{","}"];(p(r)&&(O=!0,_=["[","]"]),N(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(b=" "+RegExp.prototype.toString.call(r)),E(r)&&(b=" "+Date.prototype.toUTCString.call(r)),w(r)&&(b=" "+f(r)),0!==a.length||O&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),l=O?function(t,e,r,n,o){for(var i=[],a=0,s=e.length;a<s;++a)D(e,String(a))?i.push(h(t,e,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(t,e,r,n,o,!0))})),i}(t,r,n,s,a):a.map((function(e){return h(t,r,n,s,e,O)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(l,b,_)):_[0]+b+_[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),D(n,o)||(a="["+o+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(r)?u(t,c.value,null):u(t,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),m(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return"number"==typeof t}function S(t){return"string"==typeof t}function m(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===O(t)}function b(t){return"object"==typeof t&&null!==t}function E(t){return b(t)&&"[object Date]"===O(t)}function w(t){return b(t)&&("[object Error]"===O(t)||t instanceof Error)}function N(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(m(i)&&(i=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=S,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=v,e.isObject=b,e.isDate=E,e.isError=w,e.isFunction=N,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(40);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=r(41),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(P&&t[P]){var e;if("function"!=typeof(e=t[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(a){r(a)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),P&&Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=P,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(x,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(39))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,l=[],u=!1,f=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):f=-1,l.length&&p())}function p(){if(!u){var t=s(h);u=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||u||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){var n=r(43),o=r(19),i=r(52),a=r(9),s=r(21),c=r(57),l=Math.ceil;t.exports=function(t,e){var r=(e=void 0===e?" ":o(e)).length;if(r<2)return r?n(e,t):e;var u=n(e,l(t/s(e)));return a(e)?i(c(u),0,t).join(""):u.slice(0,t)}},function(t,e){var r=Math.floor;t.exports=function(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=r(e/2))&&(t+=t)}while(e);return n}},function(t,e,r){var n=r(45),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(18))},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(8),o=r(49),i=r(50),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(8),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(c){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){var n=r(53);t.exports=function(t,e,r){var o=t.length;return r=void 0===r?o:r,!e&&r>=o?t:n(t,e,r)}},function(t,e){t.exports=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}},function(t,e,r){var n=r(55)("length");t.exports=n},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[i,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[i+n+"?",n,a,s,r].join("|")+")",f=RegExp(o+"(?="+o+")|"+u+l,"g");t.exports=function(t){for(var e=f.lastIndex=0;f.test(t);)++e;return e}},function(t,e,r){var n=r(58),o=r(9),i=r(59);t.exports=function(t){return o(t)?i(t):n(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[i,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[i+n+"?",n,a,s,r].join("|")+")",f=RegExp(o+"(?="+o+")|"+u+l,"g");t.exports=function(t){return t.match(f)||[]}},function(t,e,r){var n=r(61);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e,r){var n=r(62);t.exports=function(t){return t?(t=n(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,r){var n=r(63),o=r(20),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=s.test(t);return r||c.test(t)?l(t.slice(2),r?2:8):a.test(t)?NaN:+t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(19);t.exports=function(t){return null==t?"":n(t)}},function(t,e){t.exports=require("sketch/async")},function(t,e,r){"use strict";r.r(e),r.d(e,"onStartup",(function(){return gt})),r.d(e,"onSelectionChanged",(function(){return yt})),r.d(e,"onShutdown",(function(){return St})),r.d(e,"onOpenDocument",(function(){return mt})),r.d(e,"onCloseDocument",(function(){return vt})),r.d(e,"onToggleInterface",(function(){return bt}));var n=r(10),o=r.n(n),i=r(3),a=r.n(i),s=r(1),c=r.n(s),l=r(11),u=r.n(l),f=r(2),h=f.NS,p={panels:{PANEL_DESIGN_ASSETS:"PANEL_DESIGN_ASSETS",PANEL_DESIGN_ASSETS_CENTER:"PANEL_DESIGN_ASSETS_CENTER",PANEL_FILL:"PANEL_FILL",PANEL_FILL_CENTER:"PANEL_FILL_CENTER",PANEL_ARRANGE:"PANEL_ARRANGE",PANEL_ARRANGE_CENTER:"PANEL_ARRANGE_CENTER",PANEL_REPORT:"PANEL_REPORT",PANEL_PROMOTE:"PANEL_PROMOTE",PANEL_SETTING:"PANEL_SETTING",PANEL_PALETTE:"PANEL_PALETTE",PANEL_PALETTE_CENTER:"PANEL_PALETTE_CENTER",PANEL_COMPONENT:"PANEL_COMPONENT",PANEL_COMPONENT_CENTER:"PANEL_PALETTE_CENTER",PANEL_SYNC_SYMBOL:"PANEL_SYNC_SYMBOL",PANEL_SYNC_SYMBOL_CENTER:"PANEL_SYNC_SYMBOL_CENTER",PANEL_ICONFONT:"PANEL_ICONFONT",PANEL_ICONFONT_CENTER:"PANEL_ICONFONT_CENTER",PANEL_UPLOAD_ARTBOARD:"PANEL_UPLOAD_ARTBOARD",PANEL_UPLOAD_ARTBOARD_CENTER:"PANEL_UPLOAD_ARTBOARD_CENTER"},buttons:{BTN_DESIGN_ASSETS:"BTN_DESIGN_ASSETS",BTN_FILL:"BTN_FILL",BTN_ARRANGE:"BTN_ARRANGE",BTN_SETTING:"BTN_SETTING",BTN_REPORT:"BTN_REPORT",BTN_PROMOTE:"BTN_PROMOTE",BTN_PALETTE:"BTN_PALETTE",BTN_ICONFONT:"BTN_ICONFONT",BTN_COMPONENT:"BTN_COMPONENT",BTN_SYNC_SYMBOL:"BTN_SYNC_SYMBOL",BTN_UPLOAD_ARTBOARD:"BTN_UPLOAD_ARTBOARD"},plugin:{YUQUE_AUTH:"YUQUE_AUTH",BAR_EXIST:"BAR_EXIST",DELEGATE_WINDOW_EXPOSE_PANEL_FUNCTION:"DELEGATE_WINDOW_EXPOSE_PANEL_FUNCTION",DELEGATE_WINDOW_EXPOSE_SELECTOR:"DELEGATE_WINDOW_EXPOSE_SELECTOR",DELEGATE_WINDOW_MINI_SELECTOR:"DELEGATE_WINDOW_MINI_SELECTOR",DELEGATE_WINDOW_MINI_PANEL_FUNCTION:"DELEGATE_WINDOW_MINI_PANEL_FUNCTION",DELEGATE_WINDOW_MOVE_INSTANCE:"DELEGATE_WINDOW_MOVE_INSTANCE",DELEGATE_WINDOW_MOVE_SELECTOR:"DELEGATE_WINDOW_MOVE_SELECTOR",DELEGATE_WINDOW_MOVE_PANEL_FUNCTION:"DELEGATE_WINDOW_MOVE_PANEL_FUNCTION",DELEGATE_WINDOW_CLOSE_INSTANCE:"DELEGATE_WINDOW_CLOSE_INSTANCE",DELEGATE_WINDOW_CLOSE_SELECTOR:"DELEGATE_WINDOW_CLOSE_SELECTOR",DELEGATE_WINDOW_CLOSE_PANEL_FUNCTION:"DELEGATE_WINDOW_CLOSE_PANEL_FUNCTION",TIMER_LIST:"TIMER_LIST",UI_MODE:"UI_MODE",BAR:"BAR",PWD:"PWD",IS_OLD:"IS_OLD",SYMBOLMASTER_COUNT:"SYMBOLMASTER_COUNT",SKETCHTOOL_PATH:"/Applications/Sketch.app/Contents/Resources/sketchtool/bin/sketchtool",CURRENT_PORT:"CURRENT_PORT",OPENING_PANEL:"OPENING_PANEL",OPERATION_COUNT:"OPERATION_COUNT"}};Object.keys(p).forEach((function(t){Object.keys(p[t]).forEach((function(e){p[t][e]=h+p[t][e]}))}));var d=p,g={fileManager:NSFileManager.defaultManager(),_stringify:function(t,e){var r=e?1:0,n=NSJSONSerialization.dataWithJSONObject_options_error_(t,r,nil);return NSString.alloc().initWithData_encoding(n,4)},writeFile:function(t,e){var r=NSString.stringWithFormat("%@",e),n=NSString.stringWithFormat("%@",t);return r.writeToFile_atomically_encoding_error_(n,!0,4,nil)},copyFile:function(t,e){return this.fileManager.fileExistsAtPath(t)?this.fileManager.copyItemAtPath_toPath_error(t,e,nil):nil},readFile:function(t){return this.fileManager.fileExistsAtPath(t)?NSString.stringWithContentsOfFile_encoding_error_(t,4,nil):nil},readJSON:function(t,e){var r=NSData.dataWithContentsOfFile(t),n=!0===e?1:0;return NSJSONSerialization.JSONObjectWithData_options_error(r,n,nil)},size:function(t){var e=0;try{e=this.fileManager.attributesOfItemAtPath_error(t,nil).NSFileSize}catch(r){e=0}return e},writeJson:function(t,e){return this.writeFile(t,this._stringify(e))},mkDir:function(t){return!this.fileManager.fileExistsAtPath(t)&&this.fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_(t,!0,nil,nil)},exist:function(t){return!!this.fileManager.fileExistsAtPath(t)},readDir:function(t){return!!this.fileManager.fileExistsAtPath(t)&&this.fileManager.contentsOfDirectoryAtPath_error_(t,nil)},remove:function(t){return NSFileManager.defaultManager().removeItemAtPath_error(t,nil)},mkTempDir:function(t){var e=this.getTempDirPath(t);return this.mkDir(e),e},getTempDirPath:function(){var t=this.fileManager.URLsForDirectory_inDomains(13,1).lastObject(),e=Date.now()/1e3,r=NSString.stringWithFormat("%@",e);return t.URLByAppendingPathComponent(r).path()},tar:function(t,e){return(0,w().runCommand)("/usr/bin/tar",["-czvf",e,"-C",t,"."])},zip:function(t,e){return(0,w().runCommand)("/usr/bin/zip",["-r",e,t])}},y=r(7),S=function(){var t="".concat(f.NS,".LANG"),e=NSUserDefaults.standardUserDefaults().objectForKey(t);if(void 0===e){var r="".concat(NSDictionary.dictionaryWithContentsOfFile("/System/Library/CoreServices/SystemVersion.plist").objectForKey("ProductVersion"));e=NSUserDefaults.standardUserDefaults().objectForKey("AppleLanguages").objectAtIndex(0),e=(e=r>="10.12"?e.split("-").slice(0,-1).join("-"):e).indexOf("zh")>-1?"zh_cn":"en_us",NSUserDefaults.standardUserDefaults().setObject_forKey_(e,t)}if("en_us"==="".concat(e)){var n={};return Object.keys(y).forEach((function(t){n[t]={},Object.keys(y[t]).forEach((function(e){n[t][e]=e}))})),n}return y};function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var b=d.plugin,E=d.panels;function w(t){var e,r=f.NS,n=S().common;t&&(e=t.document||t.actionContext.document||MSDocument.currentDocument());var o=e?e.documentData().objectID():NSUUID.UUID().UUIDString();return{lang:function(){var t="".concat(f.NS,".LANG");return NSUserDefaults.standardUserDefaults().objectForKey(t)},isInternal:function(){return f.INTERNAL},joinNS:function(t){return"".concat(r,".").concat(t)},extend:function(t,e){return Object.keys(t).forEach((function(r){e[r]=t[r]})),e},newID:function(){return NSUUID.UUID().UUIDString()},uniqueByObjectId:function(t){var e=this;log("all: ".concat(t.length));var r=[],n=[];return t.forEach((function(t){var o=e.toJSString(t.objectID());-1===r.indexOf(o)&&(log(o),n.push(t),r.push(o))})),log("unique: ".concat(r.length)),n},appVersion:function(){if("undefined"!=typeof NSBundle)return NSBundle.mainBundle().infoDictionary().CFBundleShortVersionString},cnzzUUID:function(){var t=NSUserDefaults.standardUserDefaults().objectForKey("cnzz-uuid");return t||(t=NSUUID.UUID().UUIDString(),NSUserDefaults.standardUserDefaults().setObject_forKey(t,"cnzz-uuid")),t},getTrackData:function(){var e,r,n,o,i,a="anonymous";try{e=this.toJSString(this.cnzzUUID()),(r=this.getSettingForKey("BUC_INFO"))&&(r=JSON.parse(r),a=this.toJSString(r.name)),n=this.toJSString(t.plugin.version()),o=this.toJSString(this.appVersion()),i=this.toJSString(this.systemVersion())}catch(s){e="cnzz_uuid_empty",this.report("error",{error:s&&s.message})}return{cnzzUUID:e,userName:a,pluginVersion:n,appVersion:o,systemVersion:i}},isAppBeta:function(){var t=NSBundle.mainBundle().infoDictionary().CFBundleDisplayName;return!!t&&t.toLowerCase().indexOf("beta")>-1},isHTTPSURL:function(t){return(t=NSURL.URLWithString(t)).host()&&"https"===t.scheme()},appPath:function(){if("undefined"!=typeof NSBundle)return NSBundle.mainBundle().bundlePath()},systemVersion:function(){try{var t=NSProcessInfo.processInfo().operatingSystemVersionString().match(/\d*\.\d*(\.\d*)?/);if(t&&t[0]){var e=t[0];return 2===e.split(".").length?"".concat(e,".0"):e}return"0.0.0"}catch(r){return"0.0.0"}},pluginVersion:function(){return t.plugin.version()},reloadPlugins:function(){AppController.sharedInstance().pluginManager().reloadPlugins()},toJSON:function(t){var e=t.treeAsDictionary(),r=NSJSONSerialization.dataWithJSONObject_options_error_(e,0,nil);return NSString.alloc().initWithData_encoding_(r,4)},toJSString:function(t){var e=arguments.length>1?arguments[1]:null;if(!t)return"";var r=String(t).toString();return e&&e.escapeLine&&(r=r.replace(/\\-/g,"-")),e&&e.encode&&(r=encodeURIComponent(r)),r},toJSNumber:function(t){return Number(this.toJSString(t))},toSJSON:function(t){var e=t.immutableModelObject();return MSJSONDataArchiver.archiveStringWithRootObject_error(e,nil)},fromSJSON:function(t){var e=JSON.parse(t);if(!e)return null;if(e._class.length<=0)return null;var r=MSJSONDictionaryUnarchiver.alloc().initForReadingFromDictionary(e).decodeRoot();return r.class().mutableClass().alloc().initWithImmutableModelObject(r)},initSetting:function(){var t=this;Object.keys(f).forEach((function(e){t.getSettingForKey(e)&&"LARK_BASE_URL"!==e||t.setSettingForKey(e,f[e])}))},showMacOSVersionCheck:function(r){var o=this;if(this.getThreadDictForKey(b.IS_OLD,{needChannel:!1})){if(f.INTERNAL)return u.a.alert("Kitchen 不支持的系统","请升级至 macOS Sierra 10.12.1 及以上版本"),u.a.alert(n["Kitchen-Lite is not compatible with your system, please upgrade to macOS 10.11.3 or above"]),r&&r.setState(0),!1;var i=COSAlertWindow.new(),a=this.getImage({width:120,height:120},"logo");if(i.setIcon(a),i.setMessageText(n["Install Kitchen-Lite now?"]),i.setInformativeText("".concat(n["Kitchen is not compatible with your current system version:"]).concat(this.systemVersion())),i.addButtonWithTitle(n.Ok),i.addButtonWithTitle(n.Cancel),1e3===i.runModal()){e.showMessage(n["Prepare for downloading Kitchen-Lite..."]);var s="kitchen";try{var c=t.scriptPath.split("/");c.splice(-3,3),s=c.pop().split(".")[0]}catch(p){log(p)}log("💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩"),log(s);var l="".concat(s,".zip"),h="".concat(NSHomeDirectory(),"/Library/Application Support/com.bohemiancoding.sketch3/Plugins/");return g.remove(h+l),g.remove("".concat(h+s,".sketchplugin")),g.remove("".concat(h,"Kitchen")),this.curlAsync(["-o","".concat(h,"kitchen-lite.zip"),"https://gw.alipayobjects.com/os/kitchen/ea467ed8-2e2c-40f5-8ffa-96e706bfa737/kitchen-lite-0.1.2.zip"]).then((function(){e.showMessage(n["Kitchen-Lite downloaded"]),o.runCommand("/usr/bin/unzip",["-x","".concat(h,"kitchen-lite.zip"),"-d",h]),e.showMessage(n["Kitchen-Lite installed, please restart Sketch"])})).catch((function(t){log(t),e.showMessage(t.message),o.report("error",{error:t.message})})),!1}return!0}return!0},getDocumentPath:function(t){return t.fileURL()?t.fileURL().path():nil},getDocumentName:function(t){return t||(t=this.getCurrentDocument()),this.getDocumentPath(t)?this.getDocumentPath(t).lastPathComponent():nil},getThreadDictForKey:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.needChannel,n=void 0===r||r;n&&(t="".concat(o,"_").concat(t));var i=NSThread.mainThread().threadDictionary();return i[t]},setThreadDictForKey:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.needChannel,i=void 0===n||n;i&&(t="".concat(o,"_").concat(t));var a=NSThread.mainThread().threadDictionary();a[t]=e},removeThreadDictForKey:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.needChannel,n=void 0===r||r;n&&(t="".concat(o,"_").concat(t));var i=NSThread.mainThread().threadDictionary();i.removeObjectForKey(t)},getSettingForKey:function(t){return NSUserDefaults.standardUserDefaults().objectForKey(this.joinNS(t))},setSettingForKey:function(t,e){NSUserDefaults.standardUserDefaults().setObject_forKey_(e,this.joinNS(t))},removeSettingForKey:function(t){this.setSettingForKey(t,nil)},getPluginSettings:function(){var t=NSUserDefaults.standardUserDefaults().dictionaryRepresentation().allKeys(),e=this,n={};return t.forEach((function(t){t.indexOf(r)>0&&(n[t]=e.getSettingForKey(t.replace("".concat(r,"."),"")))})),n},extractFileName:function(t){return NSURL.fileURLWithPath(t).URLByDeletingPathExtension().lastPathComponent()},getParentPath:function(t){return NSURL.URLWithString(t).URLByDeletingLastPathComponent()},clearPluginSettings:function(){NSUserDefaults.standardUserDefaults().dictionaryRepresentation().allKeys().forEach((function(t){t.indexOf(r)>-1&&NSUserDefaults.standardUserDefaults().dictionaryRepresentation().removeObjectForKey(t)}))},runCommand:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=NSTask.new();n.setLaunchPath(t),e&&e.length&&n.setArguments(e);var o=NSPipe.pipe();if(n.setStandardOutput(o),n.launch(),r){if(n.waitUntilExit(),0===n.terminationStatus()){var i=o.fileHandleForReading().readDataToEndOfFile();return NSString.alloc().initWithData_encoding(i,4)}return!1}},playSystemSound:function(t){this.runCommand("/usr/bin/afplay",["/System/Library/Sounds/".concat(t,".aiff")])},dumpDocument:function(t){return this.toJSON(t.documentData())},dumpLayer:function(t){var e=t.treeAsDictionary(),r=NSJSONSerialization.dataWithJSONObject_options_error_(e,0,nil);return NSString.alloc().initWithData_encoding_(r,4)},getImage:function(e,r){var n=NSImage.alloc().initByReferencingFile(t.plugin.urlForResourceNamed("icons/".concat(r,".png")).path());return e&&n.setSize(e),n},getImageData:function(t){var e=NSURLRequest.requestWithURL(NSURL.URLWithString(t));return NSURLConnection.sendSynchronousRequest_returningResponse_error(e,null,null)},addImage:function(t,e){var r=NSImageView.alloc().initWithFrame(t),n=this.getImage(t&&t.size,e);return r.setImage(n),r},addLogo:function(e){var r=NSImageView.alloc().initWithFrame(e),n=NSImage.alloc().initByReferencingFile(t.plugin.urlForResourceNamed(this.isInternal()?"icons/logo-grey.png":"icons/logo-grey-public.png").path());return n.setSize(e.size),r.setImage(n),r.setAutoresizingMask(5),r},addImageButton:function(t,e,r,n){var o;o=t?NSButton.alloc().initWithFrame(t):NSButton.alloc().init();var i=this.getImage(t&&t.size,e);return o.setImage(i),o.setBordered(!1),o.sizeToFit(),o.setButtonType(r||5),o.setCOSJSTargetFunction(n),o.setAction("callAction:"),o},addAltImageButton:function(t){var e,r=t.rect,n=t.icon,o=t.activeIcon,i=t.type,a=t.callAction,s=t.tooltip,c=void 0===s?"":s;e=r?NSButton.alloc().initWithFrame(r):NSButton.alloc().init();var l=this.getImage(r&&r.size,n);if(e.setImage(l),o){var u=this.getImage(r&&r.size,o);e.setAlternateImage(u)}else e.setAlternateImage(l);return e.setBordered(!1),e.sizeToFit(),e.setButtonType(i||5),e.setCOSJSTargetFunction(a),e.setAction("callAction:"),e.setToolTip(c),e.removeBadge=function(){e.setImage(l),e.hasBadge=!1},e.icon=n,e},getParentAbsoluteOffset:function(t){for(var e={x:0,y:0},r=t.parentGroup();r&&r.class&&"MSPage"!=="".concat(r.class());)e.x+=r.frame().x(),e.y+=r.frame().y(),r=r.parentGroup();return e},getParentOffset:function(t){for(var e={x:0,y:0},r=t.parent;r&&!(r instanceof s.Page);)e.x+=r.frame.x,e.y+=r.frame.y,r=r.parent;return e},getSelectedFirstLayer:function(t){return t?t.selectedLayers().firstLayer():null},getSelectedArtboards:function(t){if(!t)return[];var e=[];return(t.selectedLayers().layers()||[]).forEach((function(t){"MSArtboardGroup"==="".concat(t.class())&&e.push(t)})),e},getAllPagesAndArtboards:function(t){if(!t)return[];var e=[];return t.pages().forEach((function(t){var r=[];(t.layers()||[]).forEach((function(t){"MSArtboardGroup"==="".concat(t.class())&&r.push({key:"".concat(t.objectID()),title:"".concat(t.name())})})),r.length&&e.push({key:"".concat(t.objectID()),title:"".concat(t.name()),children:r})})),log(e),e},getArtboardsWithIds:function(t,e){var r=this;if(log(e),!t)return[];var n=[];return t.pages().forEach((function(t){(t.layers()||[]).forEach((function(t){"MSArtboardGroup"==="".concat(t.class())&&(log(t.objectID()),log(e.indexOf(t.objectID())),-1!==e.indexOf(r.toJSString(t.objectID()))&&n.push(t))}))})),log(n),n},getAllArtboards:function(t){if(!t)return[];var e=[];return(t.currentPage().layers()||[]).forEach((function(t){"MSArtboardGroup"==="".concat(t.class())&&e.push(t)})),e},unzipRect:function(t){if(!t)throw Error(n["Can't find object 'GCRect'"]);var e=t.size,r=t.origin;if(!e||!r)throw Error(n["GCRect does not contain 'size' or 'origin' attribute!"]);var o=r.x,i=r.y,a=e.width,s=e.height;return"".concat(o,",").concat(i,",").concat(a,",").concat(s)},displayPopover:function(t,e,r,n,o){var i=NSTextField.new(),a=e-30,s=NSTextStorage.new().initWithString(t),c=NSTextContainer.alloc().initWithContainerSize(NSMakeSize(a,1e5)),l=NSLayoutManager.alloc().init();l.addTextContainer(c),s.addLayoutManager(l),s.addAttribute_value_range(NSFontAttributeName,i.font(),NSMakeRange(0,s.length()));var u=NSMutableParagraphStyle.new();u.lineSpacing=2,s.addAttribute_value_range(NSParagraphStyleAttributeName,u,NSMakeRange(0,s.length())),c.setLineFragmentPadding(0),l.glyphRangeForTextContainer(c);var f=l.usedRectForTextContainer(c).size.height,h=f+30,p=NSView.alloc().initWithFrame(NSMakeRect(0,0,e,h));i.setFrame(NSMakeRect(15,15,a,f)),i.setStringValue(t),i.selectable=!1,i.bordered=!1,i.drawsBackground=!1,i.lineBreakMode=0,p.addSubview(i);var d=NSViewController.new();d.view=p;var g=NSPopover.new();return g.contentViewController=d,g.behavior=2,g.contentSize=NSMakeSize(e,h),g.showRelativeToRect_ofView_preferredEdge(r,n,o),g},curlAsyncWithTask:function(t,e,r){return new Promise((function(n,o){e.setLaunchPath("/usr/bin/curl"),e.setArguments(t),log("/usr/bin/curl ".concat(t.join(" ")));var i=NSPipe.pipe(),a=NSPipe.pipe();e.setStandardOutput(i),e.setStandardError(a),e.launch(),e.waitUntilExit();var s=e.terminationStatus(),c=a.fileHandleForReading().readDataToEndOfFile(),l=NSString.alloc().initWithData_encoding(c,4);log("%%%%%%%%%%%curl error%%%%%%%%%%%%%"),log(l);var u=i.fileHandleForReading().readDataToEndOfFile(),f=NSString.alloc().initWithData_encoding(u,4);log("%%%%%%%%%%%curl response%%%%%%%%%%%%%"),log(f),0===s?(log("%%%%%%%%%%%curl status = 0%%%%%%%%%%%%%"),n(f)):r&&r()?(log("%%%%%%%%%%%curl status != 0 and check %%%%%%%%%%%%%"),n()):(log("%%%%%%%%%%%curl status != 0 and no check %%%%%%%%%%%%%"),o(Error(l)))}))},curlAsync:function(t){return new Promise((function(e,r){var n=NSTask.alloc().init();n.setLaunchPath("/usr/bin/curl"),n.setArguments(t);var o=NSPipe.pipe(),i=NSPipe.pipe();n.setStandardOutput(o),n.setStandardError(i),n.launch(),n.waitUntilExit();var a=n.terminationStatus(),s=i.fileHandleForReading().readDataToEndOfFile(),c=NSString.alloc().initWithData_encoding(s,4);if(0===a){var l=o.fileHandleForReading().readDataToEndOfFile();e(NSString.alloc().initWithData_encoding(l,4))}else r(Error(c))}))},curlAsyncWithJsonResult:function(t){return new Promise((function(e,r){var n=NSTask.alloc().init();n.setLaunchPath("/usr/bin/curl"),n.setArguments(["-i"].concat(t));var o=NSPipe.pipe(),i=NSPipe.pipe();n.setStandardOutput(o),n.setStandardError(i),n.launch(),n.waitUntilExit();var a=n.terminationStatus(),s=i.fileHandleForReading().readDataToEndOfFile(),c=NSString.alloc().initWithData_encoding(s,4);if(0===a){var l=o.fileHandleForReading().readDataToEndOfFile(),u=NSString.alloc().initWithData_encoding(l,4).split("\n\r\n");if(u.length<2)throw Error("Abnormal response!");var f=u[0],h=u[1];log("📡📡📡📡📡📡curl result📡📡📡📡📡📡📡"),log(f),log(h),e(JSON.parse(h))}else r(Error(c))}))},curlSync:function(t){var e=NSTask.alloc().init();e.setLaunchPath("/usr/bin/curl"),e.setArguments(t),log("/usr/bin/curl ".concat(t.join(" ")));var r=NSPipe.pipe(),n=NSPipe.pipe();e.setStandardOutput(r),e.setStandardError(n),e.launch(),e.waitUntilExit();var o=e.terminationStatus(),i=n.fileHandleForReading().readDataToEndOfFile(),a=NSString.alloc().initWithData_encoding(i,4);if(0===o){var s=r.fileHandleForReading().readDataToEndOfFile();return NSString.alloc().initWithData_encoding(s,4)}throw new Error(a)},syncRequest:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=NSMutableURLRequest.alloc().init(),n=e.headers,o=void 0===n?{}:n,i=e.body,a=e.method,s=void 0===a?"GET":a;r.setHTTPMethod_(s),r.setURL_(NSURL.URLWithString_(t));var c=nil,l=nil,u={"Content-Type":"application/json"};if(o=v(v({},u),o),Object.keys(o).forEach((function(t){r.setValue_forHTTPHeaderField(o[t],t)})),i){var f;if("string"==typeof e.body){var h=NSString.alloc().initWithString(i);f=h.dataUsingEncoding(4)}else f=NSJSONSerialization.dataWithJSONObject_options_error(e.body,1,l),r.setValue_forHTTPHeaderField("".concat(f.length()),"Content-Length");r.setHTTPBody(f)}var p=NSURLConnection.sendSynchronousRequest_returningResponse_error_(r,c,l);return!!p&&{text:function(){return NSString.alloc().initWithData_encoding(p,1)},json:function(){var t;try{t=JSON.parse(NSString.alloc().initWithData_encoding(p,4))}catch(e){return NSString.alloc().initWithData_encoding(p,1)}return t},blob:function(){return p}}},openUrlInBrowser:function(t){NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(t))},hasInternet:function(){var t=!1,e=NSURL.alloc().initWithString("https://www.alipay.com/"),r=NSURLRequest.alloc().initWithURL_cachePolicy_timeoutInterval(e,1,5);return NSURLConnection.sendSynchronousRequest_returningResponse_error(r,nil,nil)&&(t=!0),r.release(),e.release(),t},getPluginFolderPath:function(){var e=t.scriptPath.split("/");return e.splice(-3,3),e.join("/")},initWithContext:function(){return t.document||t.actionContext.document||MSDocument.currentDocument()},restartSketch:function(){this.runCommand("/bin/sh",["-c",'sleep 4.0; open "'.concat(this.appPath(),'"')],!1),NSApp.terminate(nil)},showPluginsPane:function(){var t=MSPluginsPreferencePane.identifier(),e=MSPreferencesController.sharedController();e.switchToPaneWithIdentifier(t),e.currentPreferencePane().tableView().reloadData()},showLibrariesPane:function(){var t=MSAssetLibrariesPreferencePane.identifier(),e=MSPreferencesController.sharedController();e.switchToPaneWithIdentifier(t),e.currentPreferencePane().tableView().reloadData()},disableScrollElasticity:function(t){try{var e=t.mainFrame().frameView().documentView().enclosingScrollView();e.setVerticalScrollElasticity(1),e.setHorizontalScrollElasticity(1)}catch(r){console.error(r&&r.message)}},getCurrentDocument:function(){return MSDocument.currentDocument()||NSDocumentController.sharedDocumentController().currentDocument()||this.initWithContext()},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={pluginId:t.plugin.identifier(),pluginVersion:t.plugin.version(),appVersion:this.appVersion(),systemVersion:this.systemVersion(),locale:NSUserDefaults.standardUserDefaults().objectForKey("AppleLocale")},o=this.getSettingForKey("BUC_INFO")||{};o&&(n=v(v({},n),{},{userName:JSON.parse(o).name}));var i=this.getThreadDictForKey("hiddenView"),a=JSON.stringify(v({action:"error"},r));if(i&&i.stringByEvaluatingJavaScriptFromString)i.stringByEvaluatingJavaScriptFromString("window.kitchen_track_error && window.kitchen_track_error(".concat(a,")"));else for(var s=["PANEL_UPLOAD_ARTBOARD","PANEL_SYNC_SYMBOL","PANEL_ICONFONT","PANEL_PALETTE","PANEL_COMPONENT","PANEL_SETTING","PANEL_FILL"],c=0;c<s.length;c+=1){var l=this.getThreadDictForKey(E[s[c]]);if(l&&l.eval){l.eval("window.kitchen_track_error && window.kitchen_track_error(".concat(a,")"));break}}this.syncRequest("https://kitchen-office.alipay.net/api/plugin/report",{method:"POST",body:{type:e,content:{userInfo:n,data:r}}})},isPanelVisible:function(t){var e=this.getThreadDictForKey(t);return!!(e&&e.panel&&e.panel.isVisible)&&e.panel.isVisible()},coverFirstSampling:function(t,e){for(var r=[],n=[],o=0;o<t.length;o+=1)n[o]=o;var i=n.slice();if(e<=n.length)for(var a=0;a<e;a+=1){var s=Math.floor(Math.random()*(n.length-a));r.push(n[s]),n[s]=n[n.length-a-1]}else{for(var c=0;c<n.length;c+=1){var l=Math.floor(Math.random()*(n.length-c));r.push(n[l]),n[l]=n[n.length-c-1]}for(var u=n.length;u<e;u+=1){var f=Math.floor(Math.random()*i.length);r.push(i[f])}}return r},isRulerVisible:function(){return NSDocumentController.sharedDocumentController().currentDocument().actionsController().actionForID("MSToggleRulersAction").isActive()},getDndPosition:function(e,r,n,o){var i=0,a=0;if(e){var s=NSScreen.mainScreen().frame(),c=t.document.window().convertRectFromScreen({origin:{x:e.x,y:s.origin.y+s.size.height-e.y},size:{width:100,height:100}}).origin,l=r.convertPoint_fromView(c,nil);if(!NSPointInRect(l,r.bounds()))return null;var u=(this.appVersion()<65?MSContentDrawView:MSCanvasView).absoluteCoordinatesFromViewCoordinates_forViewPort(l,r.viewPort());i=parseInt(u.x-n/2,10),a=parseInt(u.y-o/2,10)}else{var f=r.centerForScalingInAbsoluteCoordinates();i=parseInt(f.x-n/2,10),a=parseInt(f.y-o/2,10)}return{x:i,y:a}},pointInArtboard:function(t){var e=t.x,r=t.y,n=t.artboard.frame();return!(e<n.x()||e>n.x()+n.width())&&!(r<n.y()||r>n.y()+n.height())},pointInFrame:function(t){var e=t.x,r=t.y,n=t.artboard.frame;return!(e<n.x||e>n.x+n.width)&&!(r<n.y||r>n.y+n.height)},insertAssetToTarget:function(t,e,r){var n=this;if(t){var o=t.currentPage(),i=t.selectedLayers().layers(),a=this.getSelectedFirstLayer(t),s=i?i.length:0,c=e.frame();if(s>0&&a.parentGroup&&"MSArtboardGroup"!=="".concat(a.parentGroup().class())&&"MSPage"!=="".concat(a.parentGroup().class())){var l=a.parentGroup(),u=this.getParentAbsoluteOffset(a);c.setX(r.x-u.x),c.setY(r.y-u.y),l.insertLayer_afterLayer(e,a)}else{var f=o.artboards().find((function(t){return n.pointInArtboard({x:r.x+c.width()/2,y:r.y+c.width()/2,artboard:t})}));f?(c.setX(r.x-f.frame().x()),c.setY(r.y-f.frame().y()),f.addLayer(e)):o.addLayer(e)}}},insertLayerToTarget:function(t,e){var r=this,n=c.a.getSelectedDocument(),o=n.selectedLayers,i=n.selectedPage,a=o.layers[0],l=t.frame;if(o.isEmpty||!a.parent||a.parent instanceof s.Artboard||a.parent instanceof s.Page){var u=i.layers.filter((function(t){return t instanceof s.Artboard})).find((function(t){return r.pointInFrame({x:e.x+l.width/2,y:e.y+l.height/2,artboard:t})}));u?(l.x=e.x-u.frame.x,l.y=e.y-u.frame.y,t.parent=u):t.parent=i}else{var f=a.parent,h=this.getParentOffset(a);l.x=e.x-h.x,l.y=e.y-h.y,t.parent=f}}}}r(22),r(5),r(12),r(23);var N=r(13),O=r.n(N),_=(r(24),r(25),r(0)),A=r.n(_),T=r(4),D=r.n(T);function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var R={logPrefix:" "},I=function(){function t(e){A()(this,t),this.settings=x(x({},R),e||{})}return D()(t,[{key:"setPrefix",value:function(t){return this.settings.logPrefix=t,this}},{key:"log",value:function(t,e){return print("".concat((e||"🐛 [DEBUG]")+this.settings.logPrefix," : ").concat(t)),this}},{key:"info",value:function(t){return this.log(t,"💎 [INFO]")}},{key:"warn",value:function(t){return this.log(t,"⚠️ [WARN]")}},{key:"error",value:function(t){return this.log(t,"❌ [ERROR]")}},{key:"dir",value:function(t){this.log("#####################################################################################"),this.log("# Dumping object ".concat(t)),this.log("# Class: ".concat(t.className()));var e=t.class().mocha();return this.log("### Properties"),this.log(e.properties()),this.log("### Properties With Ancestors"),this.log(e.propertiesWithAncestors()),this.log("### Methods"),this.log(e.classMethods()),this.log("### Methods With Ancestors"),this.log(e.classMethodsWithAncestors()),this.log("### Instance Methods"),this.log(e.instanceMethods()),this.log("### Instance Methods With Ancestors"),this.log(e.instanceMethodsWithAncestors()),this.log("### Protocols"),this.log(e.protocols()),this.log("### Protocols With Ancestors"),this.log(e.protocolsWithAncestors()),this.log("### Tree As Dictionary"),this.log(t.treeAsDictionary()),this.log("#####################################################################################"),this}}]),t}();function L(t){var e=new I({logPrefix:"🐜🐛 kitchen"});return{newFile:function(t,e){var r=MSDocument.alloc().init();e&&e(r);var n=NSURL.fileURLWithPath(t);r.writeToURL_ofType_forSaveOperation_originalContentsURL_error_(n,"com.bohemiancoding.sketch.drawing",0,nil,nil)},newArtboard:function(e,r){var n=new w(t).getCurrentDocument(),o=r||n.currentPage();if(!o)return t.document.showMessage("🐜 Cannot find page. ID: ".concat(o.objectID())),null;var i=MSArtboardGroup.new();return this._applyConfig(e,i),o.addLayer(i),i},newPage:function(t,e){var r=t.addBlankPage();return r.setName(e.name),r},newArtboardFromData:function(e,r,n){var o=new w(t),i=o.getCurrentDocument(),a=n||i.currentPage(),s=o.fromSJSON(r);return this._applyConfig(e,s),a.addLayer(s),s},fillLayerWithColor:function(t,r,n){var o;if(e.log("🤢".concat(r," ").concat(n)),o=void 0!==r.r?NSColor.colorWithCalibratedRed_green_blue_alpha(parseFloat(r.r/255),parseFloat(r.g/255),parseFloat(r.b/255),parseFloat(r.a)):NSColor.colorWithHex(r),"MSShapeGroup"==="".concat(t.class())||"".concat(t.class()).endsWith("Shape")||"MSShapePathLayer"==="".concat(t.class()))if(r=MSColor.colorWithNSColor(o),"background"===n){var i=t.style().enabledFills();if(i.count()>0&&0===i.lastObject().fillType())i.lastObject().setColor(r);else{var a=t.style().addStylePartOfType(0);a.setFillType(0),a.setColor(r)}}else if("border"===n){var s=t.style().borders().firstObject();if(s)s.setColor(r);else t.style().addStylePartOfType(1).setColor(r)}if("MSTextLayer"==="".concat(t.class()))if(r=MSImmutableColor.colorWithNSColor(o),"background"===n)t.setTextColor(r);else if("border"===n){var c=t.style().borders().firstObject();if(c)c.setColor(r);else t.style().addStylePartOfType(1).setColor(r)}},fillLayerWithImage:function(e,r){var n=new w(t).getImageData(e),o=t.document||NSDocumentController.sharedDocumentController().currentDocument();if(n)if(NSString.alloc().initWithData_encoding(n,4))o.showMessage("出现错误，请检查地理定位");else{var i=NSImage.alloc().initWithData(n),a=r.style().fills().firstObject();a.setFillType(4);var s=MSImageData.alloc().initWithImage&&MSImageData.alloc().initWithImage(i)||MSImageData.alloc().initWithImage_convertColorSpace&&MSImageData.alloc().initWithImage_convertColorSpace(i,!1);a.setImage(s),a.setPatternFillType(1),o.showMessage("高德地图静态图层已新建！")}else o.showMessage("图片资源请求错误，请检查网络或已选择的地理定位")},exportImage:function(r,n){if(!n.layer)throw Error("Please select layer.");var o=new w(t);n=o.extend(n,{path:o.toJSString(NSTemporaryDirectory()),scale:2,name:"preview",prefix:"",suffix:"",format:"png"});var i=MSExportRequest.exportRequestsFromExportableLayer(n.layer).firstObject(),a=[];return i.scale=n.scale,i.format=n.format,i.saveForWeb=!0,a.push(n.path,"/",n.prefix,n.name,n.suffix,".",n.format),a=a.join(""),r.saveArtboardOrSlice_toFile(i,a),e.warn(a),a},countSymbolMaster:function(t){var r=0;if(t&&t.documentData){var n=t.documentData().allSymbols();e.log(n.length),r=n?n.length:0}return r},_applyConfig:function(t,e){var r=t.name,n=t.x,o=t.y,i=t.width,a=t.height;log("_applyConfig"),log(r),log(n),log(o),log(i),log(a),r!==nil&&e.setName(r),n!==nil&&e.setX(n),o!==nil&&e.setY(o),i!==nil&&e.setWidth(i),a!==nil&&e.setHeight(a)}}}function C(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var U=r(6),F=r.n(U);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function M(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W=r(1);function z(t){return t.replace(/^\s+|\s+$/gm,"")}function Y(t){var e=F()((t.resizingConstraint||63).toString(2),6,"0");return{top:"0"===e[0],height:"0"===e[1],bottom:"0"===e[2],left:"0"===e[3],width:"0"===e[4],right:"0"===e[5]}}var K={},G={},J=[],H=function(){function t(e,r,n){if(A()(this,t),!e)return this.height=0,this.width=0,this.x=0,void(this.y=0);var o=Y(e),i=n.symbolInstanceConstraint||{},a=e.frame,s=a.height,c=void 0===s?0:s,l=a.width,u=void 0===l?0:l,f=a.x,h=void 0===f?1:f,p=a.y,d=void 0===p?1:p,g="MSTextLayer"==="".concat(e["<class>"]);this.height=o.height?c:c*n.y,this.width=o.width||g?u:u*n.x;var y=u/2,S=this.width/2;o.left||i.width?this.x=r.x+h:this.x=g?r.x+h*n.x:r.x+(h+y)*n.originX-S;var m=c/2,v=this.height/2;o.top||i.height?this.y=r.y+d:this.y=g?r.y+d*n.y+v*n.y-v:r.y+(d+m)*n.originY-v}return D()(t,[{key:"copy",value:function(){return new this.constructor(this.height,this.width,this.x,this.y)}}]),t}(),V=function t(e){var r,n,o,i,a,s,c,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(A()(this,t),e){var h="#";if(e.indexOf(h)>-1){a=(a=e).replace(h,""),r=parseInt(a.substring(0,2),16),n=parseInt(a.substring(2,4),16),o=parseInt(a.substring(4,6),16);var p=(255*(i=u)).toString(16).substring(0,2).toUpperCase();s=h+p+a,c="".concat(h+a," ").concat(100*i,"%"),l="rgba(".concat(r,",").concat(n,",").concat(o,",").concat(i,")")}else if(e.indexOf("(")>-1){var d=e,g=d.substring(d.indexOf("(")).split(",");r=z(g[0].substring(1)),n=z(g[1]),o=z(g[2]),f&&(r=255*parseFloat(r,10),n=255*parseFloat(n,10),o=255*parseFloat(o,10)),r=parseInt(r,10),n=parseInt(n,10),o=parseInt(o,10),i=parseFloat(z(g[3].substring(0,g[3].length-1))).toFixed(2);var y=r.toString(16).toUpperCase(),S=n.toString(16).toUpperCase(),m=o.toString(16).toUpperCase(),v=(255*i).toString(16).substring(0,2).toUpperCase();s=h+v+(a=y+S+m),c="".concat(h+a," ").concat(100*i,"%"),l="rgba(".concat(r,",").concat(n,",").concat(o,",").concat(i,")")}}this.r=r,this.b=o,this.g=n,this.a=i,this.hex=a,this["argb-hex"]=s,this["color-hex"]=c,this["css-rgba"]=l,this["ui-color"]=""},q=function t(e){A()(this,t),this.layers=[],this.name=e?e.name:void 0,this.objectID=e?e.objectID:void 0,this.jsonFileName="".concat(this.objectID,".json"),this.pageName=void 0,this.pageObjectID=void 0,this.slug=void 0,this.height=e?e.frame.height:0,this.width=e?e.frame.width:0,this.notes=[],this.imagePath=void 0,this.slices=[]},X=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;A()(this,t),this.name=e.name||"hotspot",this.objectID=e.objectID,this.type="hotspot",this.flow=e.flow||{},this.rect=e?new H(e,r,n):new H,this.isVisible=e.isVisible,this.isFlippedHorizontal=e.isFlippedHorizontal,this.isFlippedVertical=e.isFlippedVertical,this.isLocked=e.isLocked,this.rotation=e.rotation,this.resizingConstraint=e.resizingConstraint,this.resizingType=e.resizingType},$=function t(e,r,n){if(A()(this,t),this.name=e?e.name:void 0,this.objectID=e?e.objectID:void 0,this.pageObjectID=void 0,this.type="text",this.content=e?e.attributedString.value.text:"",this.styleName="",this.fontFace=e&&e.style.textStyle?e.style.textStyle.NSFont.attributes.NSFontNameAttribute:"",this.fontSize=e&&e.style.textStyle?e.style.textStyle.NSFont.attributes.NSFontSizeAttribute:"",this.letterSpacing=e&&e.style.textStyle&&e.style.textStyle.NSKern&&e.style.textStyle.NSKern.toFixed(1)||0,this.textAlign="",this.lineHeight=e&&e.style.textStyle&&e.style.textStyle.NSParagraphStyle&&(e.style.textStyle.NSParagraphStyle.style.minimumLineHeight||e.style.textStyle.NSParagraphStyle.style.maximumLineHeight),this.paragraphSpacing=e&&e.style.textStyle&&e.style.textStyle.NSParagraphStyle&&e.style.textStyle.NSParagraphStyle.style.paragraphSpacing||0,!this.lineHeight){var o=this.content.split("\n").length||1,i=(o-1)*this.paragraphSpacing>=0?(o-1)*this.paragraphSpacing:0,a=e&&e.frame&&e.frame.height||0;this.lineHeight=a-i>=0?(a-i)/o:0}if(e.style.textStyle&&e.style.textStyle.NSColor?this.color=new V(e.style.textStyle.NSColor.color,1,!0):e.style.textStyle&&e.style.textStyle.MSAttributedStringColorAttribute&&(this.color=new V(e.style.textStyle.MSAttributedStringColorAttribute.value,1,!1)),this.borders=[],this.css=[],this.fills=[],this.shadows=[],this.opacity=e?e.style.contextSettings.opacity:1,this.radius=0,this.rotation=e?e.rotation:0,this.rect=e?new H(e,r,n):new H,this.styleName=void 0,this.slice=void 0,e&&e.style&&e.style.sharedObjectID&&(this.styleName=G[e.style.sharedObjectID]),e&&e.style.textStyle&&e.style.textStyle.NSParagraphStyle&&0===e.style.textStyle.NSParagraphStyle.style.alignment&&(this.textAlign="left"),this.fontFace&&this.fontFace.length>0&&this.css.push("font-family: ".concat(this.fontFace,";")),this.fontSize&&this.fontSize.length>0&&this.css.push("font-size: ".concat(this.fontSize,"px;")),this.color&&this.css.push("color: ".concat(this.color["color-hex"],";")),this.letterSpacing&&this.css.push("letter-spacing: ".concat(this.letterSpacing,";")),e&&e.style.fills.length>0){var s=e.style.fills;for(var c in s)if(s[c].isEnabled>0){var l={fillType:"",color:{},gradient:{}};if(s[c].color&&this.css.push("background: ".concat(s[c].color.value,";")),0===s[c].fillType)l.fillType="color",l.color=s[c].color&&new V(s[c].color.value,this.opacity);else if(1===s[c].fillType){l.fillType="gradient";var u=s[c].gradient;l.gradient={colorStops:u.stops.map((function(t){return new V(t.color.value)})),from:u.from,to:u.to}}this.opacity<1&&this.css.push("opacity: ".concat(this.opacity,";")),this.fills.push(l)}}if(e&&e.style.borders.length>0){var f=e.style.borders;for(var h in f)if(f[h].isEnabled>0){var p={fillType:"",color:{},position:"",thickness:f[h].thickness};0===f[h].fillType&&(p.fillType="color",p.color=new V(f[h].color.value,f[h].contextSettings.opacity)),1===f[h].position&&(p.position="inside"),this.borders.push(p)}}var d;if(e&&e.style.shadows.length>0){var g=e.style.shadows;for(var y in g)if(g[y].isEnabled>0){var S={type:"outter",blurRadius:g[y].blurRadius,color:new V(g[y].color.value),offsetX:g[y].offsetX,offsetY:g[y].offsetY,spread:g[y].spread};d="box-shadow: ".concat(S.offsetX,"px ").concat(S.offsetY,"px ").concat(S.blurRadius,"px ").concat(S.spread,"px ").concat(S.color["css-rgba"]),this.shadows.push(S)}}if(e&&e.style.innerShadows.length>0){var m=e.style.innerShadows;for(var v in m)if(m[v].isEnabled>0){var b={type:"inner",blurRadius:m[v].blurRadius,color:new V(m[v].color.value),offsetX:m[v].offsetX,offsetY:m[v].offsetY,spread:m[v].spread};d&&(d+=", inset ".concat(b.offsetX,"px ").concat(b.offsetY,"px ").concat(b.blurRadius,"px ").concat(b.spread,"px ").concat(b.color["css-rgba"])),this.shadows.push(b)}}d&&(d+=";",this.css.push(d))},Q=function t(e,r,n){A()(this,t),this.name=e?e.name:void 0,this.objectID=e?e.objectID:void 0,this.pageObjectID=void 0,this.type="shape",this.styleName="",this.borders=[],this.css=[],this.fills=[],this.shadows=[];var o,i=e.style?e.style.contextSettings.opacity:0;if(this.opacity=e?i:1,this.radius=0,this.rotation=e?e.rotation:0,this.rect=e?new H(e,r,n):new H,this.styleName=void 0,this.slice=void 0,e&&e.style&&e.style.sharedObjectID&&(this.styleName=K[e.style.sharedObjectID]),e.layers){var a,s=M(e.layers);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.fixedRadius&&(this.radius=c.fixedRadius)}}catch(w){s.e(w)}finally{s.f()}}if(e&&e.style&&e.style.fills.length>0){var l=e.style.fills;for(var u in l)if(l[u].isEnabled>0){var f={fillType:"",color:{},gradient:{}};if(l[u].color&&this.css.push("background: ".concat(l[u].color.value,";")),0===l[u].fillType)f.fillType="color",f.color=l[u].color&&new V(l[u].color.value,this.opacity);else if(1===l[u].fillType){f.fillType="gradient";var h=l[u].gradient;f.gradient={colorStops:h.stops.map((function(t){return new V(t.color.value)})),from:h.from,to:h.to}}this.opacity<1&&this.css.push("opacity: ".concat(this.opacity,";")),this.fills.push(f)}}if(e&&e.style&&e.style.borders.length>0){var p=e.style.borders;for(var d in p)if(p[d].isEnabled>0){var g={fillType:"",color:{},position:"",thickness:p[d].thickness};0===p[d].fillType&&(g.fillType="color",g.color=new V(p[d].color.value,p[d].contextSettings.opacity)),1===p[d].position&&(g.position="inside"),this.css.push("border: ".concat(g.thickness,"px solid ").concat(g.color["css-rgba"],";")),this.borders.push(g)}this.radius>0&&this.css.push("border-radius: ".concat(this.radius,"px;"))}if(e&&e.style&&e.style.shadows.length>0){var y=e.style.shadows;for(var S in y)if(y[S].isEnabled>0){var m={type:"outter",blurRadius:y[S].blurRadius,color:new V(y[S].color.value),offsetX:y[S].offsetX,offsetY:y[S].offsetY,spread:y[S].spread};o="box-shadow: ".concat(m.offsetX,"px ").concat(m.offsetY,"px ").concat(m.blurRadius,"px ").concat(m.spread,"px ").concat(m.color["css-rgba"]),this.shadows.push(m)}}if(e&&e.style&&e.style.innerShadows.length>0){var v=e.style.innerShadows;for(var b in v)if(v[b].isEnabled>0){var E={type:"inner",blurRadius:v[b].blurRadius,color:new V(v[b].color.value),offsetX:v[b].offsetX,offsetY:v[b].offsetY,spread:v[b].spread};o&&(o+=", inset ".concat(E.offsetX,"px ").concat(E.offsetY,"px ").concat(E.blurRadius,"px ").concat(E.spread,"px ").concat(E.color["css-rgba"])),this.shadows.push(E)}}o&&(o+=";",this.css.push(o))},Z=function(t){return 0!==t.isVisible},tt=function(t){var e=t.symbolInstance,r=t.symbolMaster,n=t.scale;if(!r||!e)return n;var o=Y(e)||{},i=e.frame.width/r.frame.width,a=e.frame.height/r.frame.height;return{x:i*(o.width?1:n.x),y:a*(o.height?1:n.y),originX:i*n.originX,originY:a*n.originY,symbolInstanceConstraint:o}},et=function(t){var e=t.layer,r=t.rect,n=t.scale,o=Y(e)||{},i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return i.x+=e.frame.x*(o.left?1:n.x),i.y+=e.frame.y*(o.top?1:n.y),i},rt=function(t){var e=t.doc,r=t.symbolMaster,n=t.layer,o=e.documentData().layerWithID(n.objectID);return o||(r?r.getLibrary().getDocument().getLayerWithID(n.objectID).sketchObject:void 0)},nt=function t(e){var r=e.originArtOrLayer,n=e.shapes,o=e.rect,i=e.scale,a=e.util,s=e.symbolOverrideValues;if(!r||!r.layers||!Z(r))return n;var c,l=M(r.layers);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(Z(u)&&!u.name.trim().startsWith("└"))try{if("MSSymbolInstance"==="".concat(u["<class>"])||"MSLayerGroup"==="".concat(u["<class>"])){var f=u,h=i;if("MSSymbolInstance"==="".concat(u["<class>"])){var p=W.fromNative(context.document).getSymbolMasterWithID(u.symbolID);h=tt({symbolInstance:u,symbolMaster:p,scale:i});var d=rt({doc:context.document,symbolMaster:p,layer:u});if(d){var g=d.symbolMaster();g&&((f=JSON.parse(a.toJSON(g))).frame=u.frame,f.flow=u.flow)}}var y=new Q(u,o,i);y.type="group",n.push(y),t({originArtOrLayer:f,shapes:n,rect:et({layer:u,rect:o,scale:i}),scale:h,util:a,symbolOverrideValues:u.overrideValues})}else if("MSShapeGroup"==="".concat(u["<class>"])||"MSRectangleShape"==="".concat(u["<class>"])||"MSBitmapLayer"==="".concat(u["<class>"])||"MSSliceLayer"==="".concat(u["<class>"])){var S=new Q(u,o,i);u.flow&&(S.flow=u.flow),n.push(S)}else if("MSTextLayer"==="".concat(u["<class>"])){var m=new $(u,o,i,s);u.flow&&(m.flow=u.flow),n.push(m)}else if("MSHotspotLayer"==="".concat(u["<class>"])){var v=new X(u,o,i);n.push(v)}}catch(b){log("👹👹👹👹👹"),log(b.message?b.message:b);continue}}}catch(b){l.e(b)}finally{l.f()}return n},ot=function t(e,r,n,o,i){if(e){var a=i.path,s=i.pageId,c=i.type,l=i.predict,u=JSON.parse(n.dumpDocument(r));if(l=l||function(){return!1},1===e)u.layerStyles.objects.forEach((function(t){t.name&&t.objectID&&t.objectID.length>0&&(K[t.objectID]=t.name)})),t(2,r,n,o,i);else if(2===e){u.layerTextStyles.objects.forEach((function(t){t.name&&t.objectID&&t.objectID.length>0&&(G[t.objectID]=t.name)})),t(3,r,n,o,i)}else if(3===e){var f,h=o.sliceIDs&&o.sliceIDs.length,p=M(u.pages);try{for(p.s();!(f=p.n()).done;){var d=f.value;if("ARTBOARD"!==String(c)||!s||String(d.objectID)===String(s)){var y=[];if("function"==typeof l){var S,m=M(d.layers);try{for(m.s();!(S=m.n()).done;){var v=S.value;l(v)?y.push(v):console.warn("Will not parse artboard/symbol: ".concat(v.name))}}catch(B){m.e(B)}finally{m.f()}}else y=d.layers;y.length>0&&(d.layers=y,J.push(d))}}}catch(B){p.e(B)}finally{p.f()}var b,E=M(J);try{for(E.s();!(b=E.n()).done;){var w,N=b.value,O=M(N.layers);try{for(O.s();!(w=O.n()).done;){var _=w.value,A=new q(_);A.layers=nt({originArtOrLayer:_,shapes:A.layers,rect:new H,scale:{x:1,y:1,originX:1,originY:1},util:n}),A.pageName=N.name,A.pageObjectID=N.objectID;var T,D=M(A.layers);try{for(D.s();!(T=D.n()).done;){T.value.pageObjectID=N.objectID}}catch(B){D.e(B)}finally{D.f()}if(h){var P=o;if(P){var x=P[A.pageObjectID];if(x){var R,I=M(A.layers);try{for(I.s();!(R=I.n()).done;){var L,C=R.value,j=M(P.sliceIDs);try{for(j.s();!(L=j.n()).done;){var U=L.value;String(U)===String(C.objectID)&&(C.slice=x.slices[U],A.slices.push(x.slices[U]))}}catch(B){j.e(B)}finally{j.f()}}}catch(B){I.e(B)}finally{I.f()}}}}var F=JSON.stringify(A);g.mkDir("".concat(a,"/data"));var k="".concat(a,"/data/").concat(A.jsonFileName);g.writeFile(k,F)}}catch(B){O.e(B)}finally{O.f()}}}catch(B){E.e(B)}finally{E.f()}}}};r(1);var it=function(t,e){var r=w(t),n=L(t),o=r.getCurrentDocument();ot(1,o,r,function(t,e,r,n){var o=n.type,i=(n.prefix,n.path),a=(n.formats,n.scales,n.pageId);if(!i)throw Error("No export path for slices provided!");if(!r.getDocumentPath(t))return nil;if("ARTBOARD"!==String(o))return{};var s=[],c={pages:[]},l=t.pages().find((function(t){return String(t.objectID())===String(a)}));c.pages.push({id:r.toJSString(a),name:r.toJSString(l.name()),bounds:r.unzipRect(l.bounds()),slices:[]}),l.children().forEach((function(n){"MSArtboardGroup"!=="".concat(n.class())&&"MSSymbolMaster"!=="".concat(n.class())&&("MSSliceLayer"==="".concat(n.class())||n.exportOptions&&n.exportOptions()&&n.exportOptions().exportFormats()&&JSON.parse(r.toJSON(n.exportOptions().exportFormats())).length)&&(s.push(n),c.pages[0].slices.push({rect:{y:n.frame().y(),x:n.frame().x(),width:n.frame().width(),height:n.frame().height()},id:r.toJSString(n.objectID()),name:r.toJSString(n.name())}),e.exportImage(t,{layer:n,path:"".concat(i,"/slices"),name:n.objectID(),scale:1}))}));var u,f={},h=[],p=C(c.pages);try{for(p.s();!(u=p.n()).done;){var d=u.value;if("ARTBOARD"!==String(o)||String(d.id)===String(a)){var g,y={},S=C(d.slices);try{for(S.s();!(g=S.n()).done;){var m=g.value;m.pageObjectID=d.id,y[m.id]=m,h.push(m.id)}}catch(v){S.e(v)}finally{S.f()}d.slices=y,f[d.id]=d}}}catch(v){p.e(v)}finally{p.f()}return f.sliceIDs=h,f}(o,n,r,e),e)};var at,st=r(65),ct=d.panels;d.plugin,"".concat(NSHomeDirectory(),"/Library/Application Support/com.bohemiancoding.sketch3/Templates/"),new O.a({"download:":function(t){var e=t[1],r=t[2]||function(){},n=t[3]||function(){},o=t[4]||{};e.curlAsync(["-H","X-Auth-Token: ".concat(e.getSettingForKey("LARK_TOKEN")),"-o",o.distFilePath,o.repo,"-L"]).then((function(t){r(t)})).catch((function(t){n(t)}))},"addAssetLibrary:":function(t){var e=t[2]||function(){},r=t[3]||function(){},n=t[4]||{};try{var o=NSURL.fileURLWithPath_(n.distFilePath);AppController.sharedInstance().librariesController().addAssetLibraryAtURL_(o),e(!0)}catch(i){r(i)}},"notifyProgress:":function(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4];e.eval("notifyProgress(".concat(JSON.stringify({message:w().toJSString(n),percent:w().toJSString(r),fail:"1"===String(o),success:"1"===String(i)}),", importProgress)"))}}),new O.a({"doExport0:":function(t){var e=t[2]||{},r=t[3],n=t[4],o=t[5],i=t[6],a=e.baseUrl,s=e.theType,c=e.doc,l=e.artboardList,u=e.layers;try{if("SYMBOL"===r.toJSString(s)){var f=c.documentData().allSymbols();if(!f||!f.length)throw Error(at["No exportable symbol exist in current file!"]);u=r.uniqueByObjectId(f)}if("ARTBOARD"===r.toJSString(s))u=r.uniqueByObjectId(l||[]);if(!(u&&u[0]&&u[0].parentGroup()))throw Error("Symbol 属于无法访问的 Library");u.forEach((function(t){log(a.URLByAppendingPathComponent("images").path()),n.exportImage(c,{layer:t,path:a.URLByAppendingPathComponent("images").path(),name:t.objectID()})}));var h=u.map((function(t){return r.toJSString(t.objectID())}));log("🐛🐛🐛🐛🐛"),log(u),o({layerIdList:h,layers:u})}catch(p){i(p)}},"doExport1:":function(t){var e=t[0],r=t[1],n=t[2]||{},o=t[3],i=t[5],a=t[6],s=t[7],c=n.basePath,l=n.theType,u=n.layerIdList;try{it(e,{type:l,path:c,prefix:"".concat(l,"-"),pageId:s[0].parentGroup().objectID(),predict:function(t){return u.some((function(e){return o.toJSString(e)===o.toJSString(t.objectID)}))},webUI:r}),log("^^^^^^^^^^^^^^^^"),log(c),i(!0)}catch(f){a(f)}},"doExport2:":function(t){var e=t[2]||{},r=t[3],n=t[5],o=t[6],i=t[7],a=e.docPath,s=e.docName,c=e.basePath,l=e.theType,u=e.bookId,f=e.artboardGroupId,h=e.layerIdList;log("export 2:"),log(i);try{var p=g.readDir("".concat(c,"/data")),d=Array.from(p).map((function(t){return t.replace(".json","")})),y=[];h.forEach((function(t){d.forEach((function(e){"".concat(t)==="".concat(e)&&y.unshift(e)}))}));var S=r.getSettingForKey("LARK_USER_ID"),m={type:r.toJSString(l),user_id:S&&r.toJSString(S),book_id:u&&r.toJSString(u),artboard_group_id:r.toJSString(f)||null,filename:r.toJSString(s),pagename:"ARTBOARD"===r.toJSString(l)?r.toJSString(i[0].parentGroup().name()):void 0,pageObjectId:"ARTBOARD"===r.toJSString(l)?r.toJSString(i[0].parentGroup().objectID()):void 0,artboardObjectIds:y};if(log(m),g.writeFile("".concat(c,"/bundle.json"),JSON.stringify(m)),log(a),log("".concat(c,"/bundle.sketch")),!g.copyFile(a,"".concat(c,"/bundle.sketch")))throw Error("拷贝 .sketch 文件出错！");if(!g.tar(c,"".concat(c,".tar")))throw Error("文件夹压缩失败，路径: ".concat(c));log(c),n(["".concat(c,".tar"),"".concat(c,"/bundle.sketch")])}catch(v){o(v)}},"notifyProgress:":function(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[t.length-1];"0"===(a=w().toJSString(a))&&(a=null),e.eval("notifyProgress(".concat(JSON.stringify({message:w().toJSString(n),percent:w().toJSString(r),fail:"1"===String(o),success:"1"===String(i),previewUrl:a}),", exportProgress)"))},"print:":function(t){var e=t[0],r=t[1];e.eval("console.info('".concat(r,"')"))},"cancelExport:":function(t){t[0].eval("window.ks_export_cancel_ok && ks_export_cancel_ok()")},"exportArtboards:":function(t){log("🍄🍄🍄🍄🍄 EXPORT ARIBOARDS  exportArtboards:");var e=t[0],r=e.util,n=e.changedSelection,o=r.getCurrentDocument();if(n){var i=n.some((function(t){return t.isMemberOfClass(MSArtboardGroup)}));if(log("🍄🍄🍄🍄🍄 ARIBOARDS SELECTION CHANGED: ".concat(i)),!i)return}log('🍄🍄🍄🍄🍄 START TO EXPORT ARIBOARDS TO "~/Documents/Sketch Exports"');var a=r.getAllArtboards(o)||[];a.forEach((function(t){if(n&&n.length>0){var e="".concat(t.objectID());if(!n.some((function(t){return"".concat(t.objectID())===e})))return}c.a.export(t,{formats:"png","use-id-for-name":!0}),log("🍄 EXPORTED ".concat(t.name()))})),log("🍄🍄🍄🍄🍄 EXPORTED ALL ".concat(a.length," ARIBOARDS!!!"))}});var lt=function(t){var e=t.util,r=t.noExportImages,n=e.getThreadDictForKey(ct.PANEL_UPLOAD_ARTBOARD);if(n){var o=e.getCurrentDocument(),i=e.getSelectedArtboards(o),a=e.getAllArtboards(o).map((function(t){return{id:"".concat(t.objectID()),name:"".concat(t.name()),selected:i.find((function(e){return e.objectID()===t.objectID()})),imagePath:"".concat(NSHomeDirectory(),"/Documents/Sketch Exports/").concat(t.objectID(),".png")}}));if(n.eval("window.syncArtboards && window.syncArtboards(".concat(JSON.stringify(a),")")),!r){try{var s=st.createFiber();return new Promise((function(e,r){(function(t){log("!!!fiber"),log("🍄🍄🍄🍄🍄 EXPORT -- ARIBOARDS");var e=t[0],r=e.util,n=e.changedSelection,o=r.getCurrentDocument();if(log(n),n){var i=n.some((function(t){return t.isMemberOfClass(MSArtboardGroup)}));if(log("🍄🍄🍄🍄🍄 ARIBOARDS SELECTION CHANGED: ".concat(i)),!i)return}log('🍄🍄🍄🍄🍄 START TO EXPORT ARIBOARDS TO "~/Documents/Sketch Exports"');var a=r.getAllArtboards(o)||[];a.forEach((function(t){if(n&&n.length>0){var e="".concat(t.objectID());if(!n.some((function(t){return"".concat(t.objectID())===e})))return}c.a.export(t,{formats:"png","use-id-for-name":!0}),log("🍄 EXPORTED ".concat(t.name()))})),log("🍄🍄🍄🍄🍄 EXPORTED ALL ".concat(a.length," ARIBOARDS!!!"))})([t]).then(e).catch(r),s.cleanup()}))}catch(l){log(l.message)}}}},ut=r(26),ft=r.n(ut);function ht(){if(0!==arguments.length){var t=ft()(arguments),e="∙",r="";Number.isInteger(t[0])&&(r=Array(t[0]+1).join(e),t.shift()),t.forEach((function(t,e){print(e>0?"💎 ".concat(r,"↳ ").concat(t):r+t)}))}}var pt=d.plugin,dt=d.panels;function gt(t){new w(t).initSetting()}function yt(t){var e=new w(t),r=Array.from(t.actionContext.newSelection),n=Array.from(t.actionContext.oldSelection);ht("newSelection: ".concat(r)),ht("oldSelection: ".concat(n)),lt({util:e,changedSelection:[].concat(o()(r),o()(n))}),ht("after syncArtboardsToPanel--")}function St(t){var e=new w(t);ht("🐛shutdown"),e.getThreadDictForKey(pt.BAR)&&NSApp.delegate().runPluginCommand_fromMenu_context(t.plugin.commands().objectForKey("showToolbar"),!1,t);var r=e.getCurrentDocument();r&&r.showMessage("如果刚刚更新完毕，请重启 sketch 后再使用 kitchen。")}function mt(t){ht("🐛🐛🐛 OnOpenDocument 1");setTimeout((function(){!function(){ht("🐛🐛🐛 OnOpenDocument 2");var e=t.document||t.actionContext.document||MSDocument.currentDocument();if(e&&e.documentWindow&&e.documentWindow()&&e.documentWindow().contentView()&&e.documentData){ht("🐛🐛🐛 OnOpenDocument 3");var r=new w(t);r.initSetting(),ht("CHECK RUN_ON_DOCUMENT_OPEN ".concat(r.getSettingForKey("RUN_ON_DOCUMENT_OPEN"))),"1"===String(r.getSettingForKey("RUN_ON_DOCUMENT_OPEN"))&&(ht("🐛🐛🐛 OnOpenDocument 4"),NSApp.delegate().runPluginCommand_fromMenu_context(t.plugin.commands().objectForKey("showToolbar"),!1,t)),ht("🐛🐛🐛 OnOpenDocument 5");var n=r.runCommand("/bin/pwd",[]);r.setThreadDictForKey(pt.PWD,n.trim()),ht("🐛🐛🐛 OnOpenDocument 6")}}()}),0)}function vt(t){var e=new w(t);Object.keys(dt).forEach((function(t){var r=e.getThreadDictForKey(dt[t]);r&&r.panel&&(r.panel.close(),e.removeThreadDictForKey(dt[t]))}))}function bt(t){var e=new w(t);e.getThreadDictForKey(pt.BAR_EXIST)?(e.setThreadDictForKey(pt.BAR_EXIST,null),NSApp.delegate().runPluginCommand_fromMenu_context(t.plugin.commands().objectForKey("showToolbar"),!1,t)):e.getThreadDictForKey(pt.BAR)&&(e.setThreadDictForKey(pt.BAR_EXIST,1),NSApp.delegate().runPluginCommand_fromMenu_context(t.plugin.commands().objectForKey("showToolbar"),!1,t))}}]);if("default"===key&&"function"==typeof exports)exports(context);else{if("function"!=typeof exports[key])throw new Error('Missing export named "'+key+'". Your command should contain something like `export function " + key +"() {}`.');exports[key](context)}}catch(err){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw err;process.emit("uncaughtException",err,"uncaughtException")}}globalThis.onStartup=__skpm_run.bind(this,"onStartup"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.onToggleInterface=__skpm_run.bind(this,"onToggleInterface"),globalThis.onOpenDocument=__skpm_run.bind(this,"onOpenDocument"),globalThis.onCloseDocument=__skpm_run.bind(this,"onCloseDocument"),globalThis.onSelectionChanged=__skpm_run.bind(this,"onSelectionChanged"),globalThis.onRun=__skpm_run.bind(this,"default");