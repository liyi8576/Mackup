!function(e){function t(t){for(var r,c,i=t[0],l=t[1],s=t[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={1:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;o.push([678,0]),n()}({0:function(e,t){e.exports=React},38:function(e,t){e.exports=Handsontable},678:function(e,t,n){e.exports=n(717)},684:function(e,t,n){},714:function(e,t,n){},715:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){"use strict";n.r(t);n(40);var r=n(13),a=n(9),o=n.n(a),c=n(10),i=n.n(c),l=n(3),s=n.n(l),u=n(11),f=n.n(u),d=n(12),p=n.n(d),m=n(6),h=n.n(m),y=n(2),g=n.n(y),v=n(0),w=n.n(v),b=n(8),E=n.n(b),k=n(1),C=n.n(k),O=n(47),S=n(93),j=(n(223),n(150)),D=(n(46),n(18));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var R=function(e){f()(n,e);var t=P(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),g()(s()(e),"state",{error:void 0,info:{componentStack:""}}),e}return i()(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onRetry,r=this.state,a=r.error,o=r.info;return a?w.a.createElement("div",{style:{padding:24}},w.a.createElement(j.a,{type:"error",message:a.toString(),showIcon:!0,description:w.a.createElement("div",null,w.a.createElement("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 200px)"}},o&&o.componentStack?o.componentStack:null),w.a.createElement("div",{style:{marginTop:24}},w.a.createElement(D.a,{type:"primary",onClick:n},"重试")))})):t}}]),n}(v.Component);function x(e){return"start"===e?"left":"end"===e?"right":e}var T=function(){if(!window.hotTableInstance||window.hotTableInstance.isDestroyed)return{dataSource:[],columns:[]};var e=window.hotTableInstance.getData(),t=window.hotTableInstance.getColHeader().map((function(t,n){return{title:(e[0]||[])[n],dataIndex:t,key:t,style:{flex:window.hotTableInstance.getColWidth(n),textAlign:window.hotTableInstance.getCell(0,n)?x(window.getComputedStyle(window.hotTableInstance.getCell(0,n),null).textAlign):void 0},render:function(e){return e.content||e}}})),n=[];return e.slice(1,e.length).forEach((function(e,r){var a={};e.forEach((function(e,n){var o=window.hotTableInstance.getCell(r,n);a[t[n].dataIndex]={content:e,style:{textAlign:o?x(window.getComputedStyle(o,null).textAlign):void 0}}})),n.push(a)})),{dataSource:n,columns:t}},N=n(29),H=n.n(N),I=n(41),_=n.n(I);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={limit:100,stack:[],present:-1},G=function(e,t){var n=e.stack,r=e.present,a=e.limit;switch(t.type){case"UNDO":return t.callback&&t.callback(n[r-1]),{stack:n,present:r-1,limit:a};case"REDO":return t.callback&&t.callback(n[r+1]),{stack:n,present:r+1,limit:a};case"SET":var o=t.item;if(o===n[r])return e;e.present<e.stack.length-1&&(n.length=r+1),n.push(o);var c=r+1;if(n.length>a){var i=n.length-a;1===i?n.shift():n.splice(0,i),c-=i}return{stack:n,present:c,limit:a};case"RESET":return{stack:[t.origin],present:0,limit:a};default:return e}},B=function(e,t,n){var r={};void 0!==e&&(r={stack:[e],present:0});var a=Object(v.useReducer)(G,z(z(z({},A),r),{},{limit:t})),o=_()(a,2),c=o[0],i=o[1];Object(v.useEffect)((function(){i({type:"RESET",origin:e})}),[e]);var l=c.present>=1,s=c.present<c.stack.length-1,u=Object(v.useCallback)((function(){l&&i({type:"UNDO",callback:n.current.reset})}),[l,i]),f=Object(v.useCallback)((function(){s&&i({type:"REDO",callback:n.current.reset})}),[s,i]),d=Object(v.useCallback)((function(e){return i({type:"SET",item:e})}),[i]),p=Object(v.useCallback)((function(e){i({type:"RESET",origin:e}),n.current.reset(e)}),[i]),m=c.stack[c.present];return{set:d,reset:p,undo:u,redo:f,canUndo:l,canRedo:s,present:m}},F=(n(49),n(21)),M=(n(165),n(112)),L=(n(31),n(5)),J=(n(259),n(148)),V=(n(679),n(270)),K=(n(681),n(359)),X=n(116),Y=n.n(X),W=n(354),$=n.n(W),q=n(108),Q=n.n(q),Z=(n(683),function(e,t){var n=Object(v.useCallback)((function(n){90===n.keyCode&&n.metaKey&&!n.shiftKey?e():90===n.keyCode&&n.metaKey&&n.shiftKey&&t()}),[e,t]);Object(v.useEffect)((function(){return"undefined"==typeof window||!window.document||!window.document.createElement?(console.error("Window is not defined"),null):(document.addEventListener("keydown",n),function(){window.document.removeEventListener("keydown",n)})}),[e,t])}),ee=L.a.createFromIconfontCN({scriptUrl:"https://at.alicdn.com/t/font_1338320_pwl4o5f01o.js"});n(684);Y.a.locale("zh-cn"),Y.a.extend($.a);var te={Area:"面积图",StackArea:"堆叠面积图",PercentageStackArea:"百分比堆叠面积图",Bar:"条形图",GroupBar:"分组条形图",StackBar:"堆叠条形图",PercentageStackBar:"百分比堆叠条形图",Column:"柱形图",GroupColumn:"分组柱形图",StackColumn:"堆叠柱形图",PercentageStackColumn:"百分比堆叠柱形图",Line:"折线图",Pie:"饼图",Ring:"环形图",Radar:"雷达"},ne=w.a.memo((function(e){var t=e.config,n=e.onBack,r=e.handleGenerate,a=e.canRedo,o=e.canUndo,c=e.redo,i=e.undo,l=e.resetConfig,s=e.history,u=e.onApplyHistory,f=e.onClearHistory,d=Q()(s,(function(e){return Y()().diff(Y()(e.date),"weeks")>1?"更早":"本周之内"})),p={本周之内:d["本周之内"]||[],更早:d["更早"]||[]},m=Object(v.useCallback)((function(){var e=t.category?"TABLE":"CHART";f(e)}),[f,t]),h=Object.keys(p).map((function(e){var t=p[e],n="更早"===e?{style:{color:"rgba(0,0,0,.65)"},color:"rgba(163,177,191,0.15)"}:{color:"#108ee9"};return w.a.createElement(V.a.Item,{key:e},w.a.createElement("div",{className:"history-date-title"},w.a.createElement(K.a,n,e)),w.a.createElement("ul",{className:"history-list"},t.reverse().map((function(e){var t=e.category?"表格":te[e.configs.type];return w.a.createElement("li",{key:e.date,className:"history-item"},w.a.createElement("span",{className:"history-item-title",title:t},t),w.a.createElement("span",{className:"history-item-date"},Y()(e.date).fromNow()),w.a.createElement("a",{className:"history-item-apply",href:"#",onClick:function(){return u(e)},title:Y()(e.date).format("YYYY-MM-DD HH:mm:ss")},"应用"))}))))})),y=s&&s.length>0,g=Object(v.useCallback)((function(){a&&c()}),[c,a]),b=Object(v.useCallback)((function(){o&&i()}),[i,o]),E=Object(v.useCallback)((function(){l(t)}),[t,l]);return Z(b,g),w.a.createElement("div",{className:"footer"},w.a.createElement("div",{className:"footer-router"},a||o?w.a.createElement(J.a,{overlayClassName:"footer-popconfirm",title:"返回首页会丢失已有修改，确认返回吗？",onConfirm:n,icon:null,okText:"确定",cancelText:"取消"},w.a.createElement("div",{className:"footer-router-item footer-router-back"},window.ks_i18n["Back Home"])):w.a.createElement("div",{className:"footer-router-item footer-router-back",onClick:n},window.ks_i18n["Back Home"])),w.a.createElement("div",{className:"history"},w.a.createElement(M.a,{title:null,overlayClassName:"history-popover",content:w.a.createElement("div",null,w.a.createElement(V.a,{style:{width:260,maxHeight:"calc(100vh - 120px)",overflow:"auto",padding:"8px 16px"}},y?h:w.a.createElement("div",{className:"history-popover-notfound"},w.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/iUiSlmAMRtsydJpvrOhE.svg",alt:"404"}),w.a.createElement("div",{className:"history-popover-notfound-text"},"暂无历史记录"),w.a.createElement("div",{className:"history-popover-notfound-desc"},"图表生成后会保存配置和数据以便复原"))),y?w.a.createElement("a",{className:"clear-history",onClick:m},"清空历史"):null),placement:"bottom",arrowPointAtCenter:!0},w.a.createElement(L.a,{type:"clock-circle-o",className:"history",title:"图表生成历史"}))),w.a.createElement("div",{className:"un-redo undo",style:{color:"".concat(o?"#00000099":"#ccc")},onClick:b},w.a.createElement(F.a,{placement:"top",title:"撤销"},w.a.createElement(ee,{type:"icon-Undo"}))),w.a.createElement("div",{className:"un-redo redo",style:{color:"".concat(a?"#00000099":"#ccc")},onClick:g},w.a.createElement(F.a,{placement:"top",title:"重做"},w.a.createElement(ee,{type:"icon-Redo"}))),w.a.createElement(D.a,{icon:"undo",onClick:E},window.ks_i18n.Reset),w.a.createElement(D.a,{icon:"check",type:"primary",onClick:r},window.ks_i18n.Generate))})),re=window.ChartShaper.DrawingBoard,ae=w.a.memo((function(e){var t=e.config,n=e.onGenerate,r=e.language,a=Object(v.useState)(t),o=_()(a,2),c=o[0],i=o[1],l=w.a.useRef(),s=B(t,50,l),u=s.set,f=s.reset,d=s.canUndo,p=s.redo,m=s.undo,h=s.canRedo,y=s.present,g=Object(v.useCallback)((function(e,t){"MODIFY_A_VALUE"===t&&(window.EI_USE=(window.EI_USE||0)+1),u(e)}),[u]),b=Object(v.useCallback)((function(){n(y)}),[y,n]);return Object(v.useEffect)((function(){i(t)}),[t]),w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"main"},w.a.createElement(re,{ref:l,config:c,onChange:g,language:r})),w.a.createElement(ne,H()({},e,{canRedo:h,canUndo:d,redo:p,undo:m,resetConfig:f,handleGenerate:b})))})),oe=window.ChartShaper.Guide,ce=w.a.memo((function(e){var t=e.onSelect,n=e.onInitTable,r=e.language,a=void 0===r?"en-US":r;return w.a.createElement("div",{className:"guide"},w.a.createElement(oe,{onSelect:t,handleTableSelect:n,language:a}))})),ie=n(111),le=n.n(ie);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var de=function(e){f()(n,e);var t=fe(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),g()(s()(e),"onChangeField",(function(){var t=arguments.length<=0?void 0:arguments[0],n=t.target,r={};if(n){var a=n.type,o=n.name,c=n.checked,i=n.value;if("checkbox"===a)r={[o]:c};else if("radio"===a||"text"===a)r={[o]:i};else if("tel"===a){var l=/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/;(!Number.isNaN(i)&&l.test(i)||""===i||"-"===i)&&(r={[o]:i})}}else{var s=arguments.length<=0?void 0:arguments[0],u=arguments.length<=1?void 0:arguments[1];r={[s]:u}}var f=e.props,d=f.config,p=f.ConfigComponent,m=f.onChange;m(ue(ue({},d||p.defaultProps),r)),r=null})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.ConfigComponent;return w.a.createElement("div",{className:"config-area"},w.a.createElement("div",{className:"title"},window.ks_i18n["Element config"]),w.a.createElement(n,H()({},t||n.defaultProps,{onChangeField:this.onChangeField})))}}]),n}(w.a.PureComponent);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}g()(de,"contextTypes",{track:C.a.func});var me=function(e){f()(n,e);var t=pe(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),g()(s()(e),"handlePreview",(function(){var t=e.props.onPreviewChange;(0,e.context.track)({action:"点击预览图标"}),t()})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.PreviewComponent,r=e.large,a=e.preview;return w.a.createElement("div",{className:"preview-area"},w.a.createElement("div",{className:"title"},window.ks_i18n.Preview,!r&&w.a.createElement(F.a,{placement:"right",title:a?window.ks_i18n["Editing Mode"]:window.ks_i18n["Preview Mode"]},w.a.createElement(L.a,{className:"preview-area-magnify",type:a?"eye":"eye-o",onClick:this.handlePreview}))),w.a.createElement(n,t||n.defaultProps))}}]),n}(w.a.PureComponent);g()(me,"contextTypes",{track:C.a.func});var he=n(84),ye=n.n(he);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ve=function(e){f()(n,e);var t=ge(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.DataComponent,n=e.preview,r=ye()(e,["DataComponent","preview"]);return w.a.createElement("div",{className:"data-area"},w.a.createElement("div",{className:"title"},n?window.ks_i18n.Preview:window.ks_i18n["Origin data"]),w.a.createElement(t,H()({preview:n},r)))}}]),n}(w.a.PureComponent),we={title:!1,footer:!1,checkable:!1,bordered:!1,expandable:!1,size:"default",widthValue:600},be=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]],Ee=(n(136),n(51)),ke=(n(123),n(42)),Ce=(n(54),n(28)),Oe=(n(138),n(39)),Se=(n(134),n(43)),je=function(e){var t=e.title,n=e.footer,r=e.checkable,a=e.bordered,o=e.expandable,c=e.size,i=e.widthValue,l=e.onChangeField;return w.a.createElement("div",null,w.a.createElement("div",{className:"sep-title"},"表格尺寸"),w.a.createElement(Se.a.Group,{name:"size",onChange:l,value:c},w.a.createElement(Se.a,{className:"vertical-radio",value:"default"},"默认尺寸"),w.a.createElement(Se.a,{className:"vertical-radio",value:"middle"},"中等"),w.a.createElement(Se.a,{className:"vertical-radio",value:"small"},"小")),w.a.createElement(ke.a,null,w.a.createElement(Oe.a,{offset:0,span:7,style:{lineHeight:"30px"}},"导出宽度"),w.a.createElement(Oe.a,{offset:2,span:15},w.a.createElement(Ce.a,{style:{width:130},type:"tel",placeholder:"800",suffix:"px",maxLength:"25",name:"widthValue",value:i,onChange:l}))),w.a.createElement("div",{className:"sep-title"},"属性"),w.a.createElement(Ee.a,{checked:t,name:"title",onChange:l},"标题"),w.a.createElement(Ee.a,{checked:r,name:"checkable",onChange:l},"多选框"),w.a.createElement(Ee.a,{checked:a,name:"bordered",onChange:l},"列边框"),w.a.createElement(Ee.a,{checked:o,name:"expandable",onChange:l},"折叠/收起"),w.a.createElement(Ee.a,{checked:n,name:"footer",onChange:l},"页脚"))};je.defaultProps=we;for(var De=je,Pe=(n(337),n(214)),Re=function(e){var t=e.width;return w.a.createElement("div",{style:{height:4,width:t||"100%",background:"#e4e4e4"}})},xe=[{title:Re({width:60}),dataIndex:"name",key:"name"},{title:Re({width:180}),dataIndex:"age",key:"age"},{title:Re({width:60}),dataIndex:"address",key:"address"}],Te=[],Ne=1;Ne<=3;Ne+=1)Te.push({key:Ne,name:Re({width:60}),age:Re({width:180}),address:Re({width:60})});var He=function(e){return w.a.createElement("p",null,e.description)},Ie=function(){return"Here is title"},_e=function(){return"Here is footer"},Ue=function(e){var t=e.title,n=e.footer,r=e.checkable,a=e.bordered,o=e.expandable,c=e.size;return w.a.createElement("div",{style:{width:200,height:160}},w.a.createElement(Pe.a,{style:{transform:"scale(0.4)",transformOrigin:"0 0",width:500},pagination:!1,bordered:a,title:t?Ie:null,footer:n?_e:null,expandedRowRender:o?He:null,rowSelection:r?{}:null,columns:xe,dataSource:Te,size:c,showHeader:!0}))};Ue.defaultProps=we;var ze=Ue,Ae=n(356),Ge=function(){return w.a.createElement("p",null,"我是 description")},Be=function(){return"表格标题"},Fe=function(){return"表格页脚"},Me=w.a.memo((function(e){var t=e.tableProps,n=void 0===t?{}:t,r=e.preview,a=e.onDataChange,o=e.dataForHandsontable,c=Object(v.useRef)(),i=Object(v.useCallback)((function(e,t){"loadData"!==t&&setTimeout((function(){return a()}),0)}),[a]),l=Object(v.useCallback)((function(e,t,n){"loadData"!==n&&setTimeout((function(){return a()}),0)}),[a]),s=Object(v.useCallback)((function(e,t,n,r){"loadData"!==r&&setTimeout((function(){return a()}),0)}),[a]),u=Object(v.useCallback)((function(){setTimeout((function(){return a()}),0)}),[a]);Object(v.useEffect)((function(){c.current&&(window.hotTableInstance=c.current.hotInstance)}),[]),Object(v.useEffect)((function(){var e=o?le()(o):le()(be);window.hotTableInstance.loadData(e)}),[o]);var f=n.widthValue,d=void 0===f?600:f;d<0&&(d=600);var p=n.title,m=n.footer,h=n.checkable,y=n.bordered,g=n.expandable,b=n.size,E=ye()(n,["title","footer","checkable","bordered","expandable","size"]);return w.a.createElement("div",{style:{overflow:"auto",maxWidth:"calc(100vw - 342px)"}},w.a.createElement("div",{style:{display:r?"block":"none",height:510}},w.a.createElement("div",{style:{width:d}},w.a.createElement(Pe.a,H()({className:"preview-table",pagination:!1,bordered:y,title:p?Be:null,footer:m?Fe:null,expandedRowRender:g?Ge:null,rowSelection:h?{}:null,size:b,showHeader:!0},E)))),w.a.createElement("div",{style:r?{position:"absolute",visibility:"hidden"}:null},w.a.createElement(Ae.a,{ref:c,root:"hot",manualColumnResize:!0,afterColumnResize:u,colHeaders:!0,rowHeaders:!0,height:492,stretchH:"all",afterChange:i,afterRemoveCol:s,afterRemoveRow:s,afterCreateCol:l,afterCreateRow:l,contextMenu:["row_above","row_below","col_left","col_right","remove_row","remove_col","copy","cut"],licenseKey:"non-commercial-and-evaluation",language:"zh-CN"})))})),Le=(n(714),{defaultProps:we,ConfigJSX:De,PreviewJSX:ze,DataJSX:Me}),Je=(n(715),{table:Le});function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var Ye=function(e){f()(n,e);var t=Xe(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),g()(s()(e),"state",{preview:!1}),g()(s()(e),"onTableConfigChange",(function(t){var n=e.props;(0,n.onChange)(Ke(Ke({},n.config),{},{config:t}))})),g()(s()(e),"onDataChange",(function(){var t=e.props,n=t.onChange,r=t.config,a=le()(window.hotTableInstance.getData()),o=T();n(Ke(Ke({},r),{},{dataForHandsontable:a,componentData:o}))})),g()(s()(e),"onPreviewChange",(function(){var t=e.state.preview;e.setState({preview:!t})})),e}return i()(n,[{key:"getTableProps",value:function(){var e=this.props.config;return Ke(Ke({},e.config),e.componentData)}},{key:"render",value:function(){var e=this.props,t=e.current,n=void 0===t?"table":t,r=e.config,a=this.state.preview,o=Je[n],c=o.ConfigJSX,i=o.PreviewJSX,l=o.DataJSX,s=w.a.createElement(me,{PreviewComponent:i,preview:a,config:r.config,key:"preview",large:!l,onPreviewChange:this.onPreviewChange});return w.a.createElement("div",{className:"areas-container"},w.a.createElement("div",{className:"vertical-zone-main"},l?w.a.createElement(ve,{DataComponent:l,dataForHandsontable:r.dataForHandsontable,tableProps:this.getTableProps(),onDataChange:this.onDataChange,preview:a}):s),w.a.createElement("div",{className:"vertical-zone-side"},w.a.createElement(de,{ConfigComponent:c,config:r.config,current:n,onChange:this.onTableConfigChange}),l?s:null))}}]),n}(w.a.PureComponent),We=w.a.memo((function(e){var t=e.config,n=e.onGenerate,r=e.history,a=B(t,50),o=a.set,c=a.reset,i=a.undo,l=a.redo,s=a.canUndo,u=a.canRedo,f=a.present,d=Object(v.useCallback)((function(e){o(e)}),[o]),p=Object(v.useCallback)((function(){n(f)}),[n,f]);return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"main chartshaper-table"},w.a.createElement(Ye,{config:f,onChange:d})),w.a.createElement(ne,H()({},e,{canRedo:u,canUndo:s,redo:l,undo:i,resetConfig:c,handleGenerate:p,history:r})))}));function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"u";return"".concat(e).concat("-xxxx-xxx".replace(/x/g,(function(){return(16*Math.random()|0).toString(16)})))}var qe=n(14),Qe=n(62);n(68),n(716);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}window.pluginCall=qe.a,window.Kitchen={},window.Kitchen.AntD={};var nt=window.ChartShaper.exporter.exportSvgCode,rt={en_us:"en-US",zh_cn:"zh-CN"},at=function(e){f()(n,e);var t=tt(n);function n(){var e;o()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),g()(s()(e),"state",{router:"guide",loading:!1,config:null,chartHistory:[],tableHistory:[]}),g()(s()(e),"updateGenerateHistory",(function(t,n){var r="CHART"===t?"chartHistory":"tableHistory";e.setState({[r]:n})})),g()(s()(e),"onComplete",(function(){e.setState({loading:!1})})),g()(s()(e),"onError",(function(t){r.a.error("".concat(window.ks_i18n["An error occurred, info:"]).concat(t)),e.setState({loading:!1})})),g()(s()(e),"onReset",(function(){var t=e.state.config;e.setState({config:{category:t.category,id:t.id}})})),g()(s()(e),"onBack",(function(){e.setState({router:"guide",config:null})})),g()(s()(e),"onChange",(function(t){e.setState({config:t})})),g()(s()(e),"onRetry",(function(){window.location.reload()})),g()(s()(e),"onSelectChartType",(function(t){var n=e.props.trackData,r=et({id:$e()},window.ChartShaper.getDemoConfigById(t));e.setState({router:"chart",config:r}),window.Tracert&&(window.Tracert.click("chartShaper.editChart",{UUID:n.cnzzUUID,type:r.configs.type}),window.EI_USE=0,window.startTime=new Date)})),g()(s()(e),"onInitTable",(function(){var t=e.props.trackData;e.setState({router:"table",config:{category:"table"}}),window.Tracert&&(window.Tracert.click("chartShaper.editTable",{UUID:t.cnzzUUID,type:"table"}),window.EI_USE=0,window.startTime=new Date)})),g()(s()(e),"onGenerate",(function(t){var n=e.props.trackData,r=e.context.track,a=t;if(r({action:"生成组件-".concat(t.category?t.category:t.configs.type)}),window.Tracert&&window.Tracert.click("chartShaper.generate",{UUID:n.cnzzUUID,type:t.category?t.category:t.configs.type,duration:new Date-window.startTime,EI_USE:window.EI_USE}),!("table"!==t.category||t.componentData&&t.dataForHandsontable)){var o=window.hotTableInstance.getData(),c=T();a=et(et({},t),{},{dataForHandsontable:o,componentData:c})}e.setState({loading:!0,config:a}),"table"===t.category?Object(qe.a)("generate",[{config:a}]):nt(t.data,t.configs).then((function(e){Object(qe.a)("generate",[{config:a,svgXmlString:e}])}))})),g()(s()(e),"onApplyHistory",(function(t){var n=e.props.trackData,r=et(et({},t),{},{id:$e()});e.setState({config:r}),window.Tracert&&(window.Tracert.click("chartShaper.history",{UUID:n.cnzzUUID,type:t.category?t.category:t.configs.type}),window.EI_USE=0,window.startTime=new Date)})),g()(s()(e),"onClearHistory",(function(e){Object(qe.a)("clearGenerateHistory",[e])})),e}return i()(n,[{key:"componentDidMount",value:function(){S.a.addListener("complete",this.onComplete),S.a.addListener("error",this.onError),S.a.addListener("syncGenerateHistory",this.updateGenerateHistory)}},{key:"componentWillUnmount",value:function(){S.a.removeListener("complete",this.onComplete),S.a.removeListener("error",this.onError),S.a.removeListener("syncGenerateHistory",this.updateGenerateHistory)}},{key:"renderPage",value:function(){var e=this.state,t=e.router,n=e.config,r=e.loading,a=e.chartHistory,o=e.tableHistory;return"guide"===t?w.a.createElement(ce,{onSelect:this.onSelectChartType,onInitTable:this.onInitTable,language:rt[window.ks_lang]||"zh-CN"}):"chart"===t?w.a.createElement(ae,{config:n,loading:r,onHide:this.onHide,onBack:this.onBack,onGenerate:this.onGenerate,history:a,language:rt[window.ks_lang]||"zh-CN",onApplyHistory:this.onApplyHistory,onClearHistory:this.onClearHistory}):"table"===t?w.a.createElement(We,{config:n,onChange:this.onChange,loading:r,onReset:this.onReset,onBack:this.onBack,onGenerate:this.onGenerate,history:o,onApplyHistory:this.onApplyHistory,onClearHistory:this.onClearHistory}):null}},{key:"render",value:function(){return w.a.createElement(R,{onRetry:this.onRetry},this.renderPage())}}]),n}(w.a.PureComponent);at.defaultProps={componentList:{table:"表格"}},at.contextTypes={track:C.a.func};var ot=Object(O.a)(at,"组件生成");window.init=function(e){var t=e.trackData,n=e.isInternal;if(window.Tracert&&(console.log("↘↘↘↘↘↘ track log"),window.Tracert.click("chartShaper.pageView",{UUID:t.cnzzUUID,bucUsername:t.userName,os:"mac",os_version:t.systemVersion,sketch_version:t.appVersion,kitchen_version:t.pluginVersion,kitchen_edition:n?"internal":"public"})),!window._kitchen_component_isInit){var r=e.isDev;(r="true"===String(r)||"1"===String(r))||Object(Qe.a)(),window._kitchen_component_isInit=!0,console.log("↘↘↘↘↘↘ render page"),E.a.render(w.a.createElement(ot,e),document.getElementById("kitchen-plugin-root"))}}},8:function(e,t){e.exports=ReactDOM}});