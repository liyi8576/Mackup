!function(e){function t(t){for(var a,c,i=t[0],l=t[1],s=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={7:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;r.push([590,0]),n()}({0:function(e,t){e.exports=React},590:function(e,t,n){e.exports=n(721)},642:function(e,t,n){},643:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){},721:function(e,t,n){"use strict";n.r(t);var a,o=n(84),r=n.n(o),c=n(29),i=n.n(c),l=n(0),s=n.n(l),u=n(8),d=n.n(u),f=n(141),m=n(50),p=n(1),h=n.n(p),g=n(47),w=n(25),v=n.n(w),y=(n(40),n(13)),k=n(35),E=n.n(k),_=n(9),b=n.n(_),I=n(10),x=n.n(I),S=n(3),C=n.n(S),D=n(11),N=n.n(D),T=n(12),j=n.n(T),M=n(6),R=n.n(M),P=n(2),L=n.n(P),O=n(26),U=n.n(O),z=n(198),F=n.n(z),A=n(14),B=n(142);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}window.pluginCall=A.a,window.sendBackSecretUUID=function(e){a=e};var G=function(e){N()(n,e);var t=K(n);function n(e){var o;return b()(this,n),o=t.call(this,e),L()(C()(o),"onClick",E()(v.a.mark((function e(){var t,n,a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F()(),n=o.props,a=n.appsecret,r=n.authUrl,e.prev=2,o.setState({loading:!0}),window.pluginCall("auth",[{func:"authBegin",params:{authUrl:encodeURIComponent(r),uuid:t,appsecret:a}}]),o.pollingTimes=0,e.next=8,o.polling.call(C()(o));case 8:if(c=e.sent){e.next=11;break}throw Error(window.ks_i18n["Network Error"]);case 11:y.a.success(window.ks_i18n["Successfully authorized"]),o.authSuccess(c.data),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0),o.setState({loading:!1}),y.a.error("".concat(window.ks_i18n["Authorization failed, please try again"],": ").concat(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))),L()(C()(o),"polling",E()(v.a.mark((function e(){var t,n,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props.checkUrl,n=6,o.pollingTimes+=1,c={},e.prev=4,e.next=7,U()("".concat(t,"/").concat(a));case 7:c=e.sent,r=c.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r=null;case 14:if(200===c.status&&r&&(r.success||200===r.code)){e.next=22;break}if(!(o.pollingTimes>n)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.next=19,new Promise((function(e){setTimeout(e,1500)}));case 19:return e.next=21,o.polling(a);case 21:r=e.sent;case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,null,[[4,11]])})))),L()(C()(o),"openUrl",(function(e){window.pluginCall("auth",[{func:"open",params:{url:e}}])})),o.state={loading:!1,token:e.token},o.pollingTimes=0,o}return x()(n,[{key:"getChildContext",value:function(){return{token:this.state.token}}},{key:"authSuccess",value:function(e){var t=this,n=this.props,o=n.onComplete,r=void 0===o?function(){}:o,c=n.appsecret;window.pluginCall("auth",[{func:"authFinish",params:{appsecret:c,token:e.token,uuid:a}}]),setTimeout((function(){t.setState({loading:!1,token:e.token}),r()}),1500)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.ui,o=this.state,r=o.token,c={logoStyle:{width:180,height:"auto"},loading:o.loading,image:a.logo,description:a.description,extraInfo:{text:a.extraInfo.text,onClick:function(){return e.openUrl(a.extraInfo.href)}},hint:a.hint,loginInfo:{text:a.okText,onClick:this.onClick}};return s.a.createElement("div",null,r?n:s.a.createElement(B.a,c))}}]),n}(s.a.Component);G.childContextTypes={token:h.a.string};var V=G,q=n(62),J=n(147),W=(n(31),n(5)),H=(n(319),n(171)),X=(n(123),n(42)),Q=(n(138),n(39)),Y=(n(164),n(65)),Z=(n(124),n(64)),$=(n(54),n(28)),ee=(n(155),n(67)),te=n(57),ne=n.n(te),ae=n(97),oe=n.n(ae),re=n(211),ce=n.n(re),ie=function(e,t,n){n.context&&n.context.track&&n.context.track({action:"插入图标"});var a=e.currentTarget.attributes,o=a["data-name"],r=a["data-xml"];o=o.value,r=r.value,"transparent"!==window.ks_iconfont_color&&"rgba(0, 0, 0, 0)"!==window.ks_iconfont_color&&(r=(r=r.replace("currentColor",window.ks_iconfont_color)).replace(/fill="[^"]*"/gi,'fill="'.concat(window.ks_iconfont_color,'"')));var c={x:e.screenX,y:e.screenY};e.currentTarget.querySelector("svg").classList.remove("drag-start"),t("dropIcon",[{iconDroppoint:c,dataName:o,dataXML:r,size:window.ks_iconfont_size}])},le=(n(596),n(358)),se=(n(165),n(112)),ue=n(212),de=n.n(ue);n(642);function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}var me=["rgba(0, 0, 0, 0)","#1890FF","#52C41A","#F5222D","#FFFFFF","#FAAD14","#333333","#666666"],pe=function(e){return void 0!==e.a?0!==e.a||0===e.r&&0===e.g&&0===e.b?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(void 0===e.a?1:e.a,")"):"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", 1)"):e};window.pluginCall=A.a;var he=function(e){N()(n,e);var t=fe(n);function n(){var e;b()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),L()(C()(e),"state",{currentColor:window.localStorage.getItem("ks_iconfont_color")||"rgba(0, 0, 0, 0)",size:window.localStorage.getItem("ks_iconfont_size")||16}),L()(C()(e),"handleColorChange",(function(t){var n=pe(t.rgb);e.setState({currentColor:n},(function(){window.ks_iconfont_color=n,window.localStorage.setItem("ks_iconfont_color",n)}))})),L()(C()(e),"handleDrop",(function(){window.ks_pickColor=function(t){if(t){var n=t.replace(/[)(\s]/g,"").split(","),a={r:Math.ceil(255*n[0]),g:Math.ceil(255*n[1]),b:Math.ceil(255*n[2]),a:1},o=pe(a);e.setState({currentColor:pe(a)},(function(){window.ks_iconfont_color=o,window.localStorage.setItem("ks_iconfont_color",window.ks_iconfont_color)}))}},window.pluginCall("pickColor",{})})),L()(C()(e),"handleSizeChange",(function(t){e.track("修改图标尺寸"),window.ks_iconfont_size=t,window.localStorage.setItem("ks_iconfont_size",window.ks_iconfont_size)})),L()(C()(e),"handleRoot",(function(t){e.root=t})),L()(C()(e),"track",(function(t){var n=e.context.track;n&&n({action:t})})),e}return x()(n,[{key:"render",value:function(){var e=this,t="icon-config",n=this.props,a=n.external,o=n.style,r=this.state,c=r.currentColor,i=r.size,l=s.a.createElement(de.a,{color:c,onDrop:this.handleDrop,onChangeComplete:this.handleColorChange,presetColors:me});return s.a.createElement("div",{className:"".concat(t),ref:this.handleRoot,style:o},s.a.createElement(se.a,{overlayClassName:"".concat(t,"-popover"),placement:"topLeft",content:l,trigger:"click"},s.a.createElement("div",{className:"".concat(t,"-color"),onClick:function(){return e.track("修改图标颜色")}},s.a.createElement("span",{style:{backgroundColor:c}}),"rgba(0, 0, 0, 0)"===c&&s.a.createElement("em",{className:"".concat(t,"-color-line")}))),s.a.createElement("div",{className:"".concat(t,"-size")},s.a.createElement(le.a,{className:"".concat(t,"-size-value"),defaultValue:i,step:8,min:8,size:"small",onChange:this.handleSizeChange})),a&&s.a.createElement("div",{className:"".concat(t,"-external")},a))}}]),n}(s.a.Component);he.contextTypes={track:h.a.func};var ge=he,we=n(128),ve=n(115);n(68),n(643);function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}var ke=U.a.CancelToken,Ee=ee.a.TabPane,_e=$.a.Search;window.pluginCall=A.a;var be="https://www.iconfont.cn",Ie={width:"25%",textAlign:"center"},xe=s.a.createElement("div",{key:"loader"},s.a.createElement(Z.a,{style:{marginTop:100}})),Se=function(e){var t=e.target;"A"===t.nodeName&&"_blank"===t.target&&t.href&&window.pluginCall("open",[t.href])},Ce=function(e){var t=e;return t=t.replace("width: 1em","width: 20").replace("height: 1em","height: 20").replace(/viewBox="[^"]*/,'viewBox="0 0 1024 1024').replace("><path",'><g><rect width="1024" height="1024" opacity="0"></rect><path').replace("</svg>","</g></svg>")},De=function(e){var t=e.children,n=e.hasMore,a=e.loadMore;return s.a.createElement(ce.a,{threshold:250,useWindow:!1,pageStart:0,loader:xe,loadMore:a,hasMore:n,className:"scroll-container"},t)},Ne=function(e){N()(n,e);var t=ye(n);function n(e){var a;return b()(this,n),a=t.call(this,e),L()(C()(a),"onChangeKeyword",(function(e){var t=a.context.track;"\t"!==e&&(a.showDefaultIcon=!e,t({action:"图标搜索"}),a.setState({keyword:e?String(e).trim():null,page:1,tracks:[],iconTracks:[],hasMoreItems:!0}))})),L()(C()(a),"onChangeSearchType",(function(e){var t=a.context.track,n=a.state.keyword;t({action:"切换为-".concat("0"===e?"图标":"图标库")}),a.setState({keyword:"",searchType:e,page:1,tracks:[],hasMoreItems:!0}),"0"===e&&(n?a.loadIconItems():a.getDefaultIcons())})),L()(C()(a),"onDragIconStart",(function(e){e.dataTransfer.setData("text",""),e.dataTransfer.clearData("text"),e.currentTarget.querySelector("svg").classList.add("drag-start")})),L()(C()(a),"onDragIconEnd",(function(e){ie(e,A.a,C()(a))})),L()(C()(a),"loadIconItems",E()(v.a.mark((function e(){var t,n,o,r,c,i,l,s,u,d,f;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.source&&a.source.cancel("取消请求"),a.source=ke.source(),t=a.props.login,e.prev=3,n=300,o=a.state,r=o.page,c=o.iconTracks,i=o.keyword,e.next=8,U.a.post("".concat(be,"/open/icon/search.json?LG_TOKEN=49b733e92d82099cf0f05bc977ad8f8d"),{sortType:"updated_at",fromCollection:"1",q:i?String(i).trim():"",pageSize:n,page:r},{cancelToken:a.source.token});case 8:if(l=e.sent,200===(s=l.data).code){e.next=12;break}return e.abrupt("return",y.a.error(window.ks_i18n["Network error, please reset after Kitchen reload"]));case 12:u=s.data,(d=u&&u.icons)&&d.length?(f=c.concat(d),a.setState({noData:!1,page:r+1,iconTracks:f,hasMoreItems:d.length===n})):a.setState({noData:i&&!0,page:1,hasMoreItems:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),U.a.isCancel(e.t0)?console.warn("Request canceled",e.t0.message):(y.a.error(e.t0.message),console.error(e.t0),we.a.report("error",{type:"webview",login:t,message:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})))),L()(C()(a),"loadLibraryItems",E()(v.a.mark((function e(){var t,n,o,r,c,i,l,s,u,d,f,m,p,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.login,e.prev=1,n=a.state,o=n.page,r=n.limit,c=n.keyword,i=n.type,l=n.sort,e.next=5,U.a.get("".concat(be,"/open/collection/lists.json?").concat(oe()({limit:r,page:o,keyword:c,type:i,sort:l})));case 5:if(s=e.sent,200===(u=s.data).code){e.next=9;break}return e.abrupt("return",y.a.error(window.ks_i18n["Network error, please reset after Kitchen reload"]));case 9:d=u.data,f=d.lists,m=d.count,p=a.state.tracks,f&&f.length?(h={},p=(p=(p=p.concat(f)).filter((function(e){return!h[e.id]&&(h[e.id]=1,!0)}))).sort((function(e){return e.name.indexOf("Ant Design")>=0?-1:0})),a.setState({noData:!1,page:o+1,tracks:p,hasMoreItems:!!(Math.ceil(m/r)-o>0)})):a.setState({noData:c&&!0,page:1,hasMoreItems:!1}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),y.a.error(e.t0.message),console.error(e.t0),we.a.report("error",{type:"webview",login:t,message:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[1,15]])})))),L()(C()(a),"handleRef",(function(e){a.root=e})),L()(C()(a),"handleInputRef",(function(e){a.searchInputNode=e})),L()(C()(a),"handleIconCardClick",(function(e){var t=e.id,n=e.name,o=a.props.history,r=a.context.track;o.push("/detail/".concat(t)),n.indexOf("Ant Design")>=0&&r({action:"打开 Ant Design 图标库"})})),a.state={noData:!1,hasMoreItems:!0,tracks:[],iconTracks:[],limit:10,page:1,keyword:"",type:ve.INTERNAL?0:1,sort:"visit",searchType:e.match.params.tab||"0",defaultIconList:[]},a.showDefaultIcon=!0,a.loadIconItems=ne()(a.loadIconItems,400),a}return x()(n,[{key:"componentDidMount",value:function(){"0"===this.state.searchType?this.getDefaultIcons():this.onChangeSearchType("1"),this.root&&this.root.addEventListener("click",Se)}},{key:"componentWillUnmount",value:function(){this.root&&this.root.removeEventListener("click",Se)}},{key:"getDefaultIcons",value:function(){var e=this;U.a.get("".concat(be,"/open/collection/detail.json?").concat(oe()({id:9402}))).then((function(t){console.log(t);var n=t.data.data.icons;if(!n||!n.length)throw Error(window.ks_i18n["Requested data empty!"]);e.setState({defaultIconList:n.map((function(t){return s.a.createElement(Y.a.Grid,{style:Ie,className:"icon-item",key:"".concat(t.name,"-").concat(t.id),title:t.name},s.a.createElement("div",{className:"dragbox","data-name":t.name,"data-xml":Ce(t.show_svg),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd},s.a.createElement("div",{className:"icon-item-svg",dangerouslySetInnerHTML:{__html:Ce(t.show_svg)}})))}))})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,a=t.login;try{var o,r,c,i=this.state,l=i.searchType,u=i.noData,d=i.keyword,f=i.defaultIconList,m=i.hasMoreItems,p=i.tracks,h=i.iconTracks,g="1"===l?"https://www.iconfont.cn/collections/index?type=3&keyword=".concat(d):"https://www.iconfont.cn/search/index?searchType=icon&q=".concat(d),w=u&&d?s.a.createElement("div",{className:"no-date-placeholder",key:"placeholder-img"},s.a.createElement("img",{alt:"not found",src:"https://gw.alipayobjects.com/zos/rmsportal/ByduwOJasddKCrSJxhmr.svg"}),s.a.createElement("p",null,window.ks_i18n["Sorry, not found"]," ",'"'.concat(d,'"')," ",window.ks_i18n["related info"],"1"===l&&!ve.INTERNAL&&s.a.createElement("span",null,", ",window.ks_i18n["go to"]," ",s.a.createElement("a",{href:g,target:"_blank"},"Iconfont ",window.ks_i18n.website)," ",window.ks_i18n["Search for more icon libraries"]))):s.a.createElement("div",null),v=s.a.createElement("p",{className:"website-tips",key:"website-tips"},window.ks_i18n["go to"]," ",s.a.createElement("a",{target:"_blank",href:d?g:"https://www.iconfont.cn"},"Iconfont ",window.ks_i18n.website)," ",window.ks_i18n["Search for more icon libraries"]);if("1"===l){var k=[];p.forEach((function(t){var n=[];t.icons.forEach((function(t,a){if(a>11)return!1;n.push(s.a.createElement(Q.a,{className:"icon-cell",span:6,key:"".concat(t.name,"-").concat(a),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd,"data-name":t.name,"data-xml":t.show_svg,dangerouslySetInnerHTML:{__html:t.show_svg}}))})),n.length&&k.push(s.a.createElement(Q.a,{span:12,key:"".concat(t.id,"-").concat(t.name)},s.a.createElement(Y.a,{onClick:function(){return e.handleIconCardClick({id:t.id,name:t.name})},bordered:!1,className:"track",title:t.name},s.a.createElement(X.a,{gutter:6,className:"icon-table"},n))))})),r=s.a.createElement(De,{loadMore:this.loadLibraryItems,hasMore:m},k.length?s.a.createElement(X.a,{gutter:6,className:"tracks"},k):w,!k.length||m||ve.INTERNAL?null:v)}else if("0"===l){var E=h.map((function(t){return s.a.createElement(Y.a.Grid,{style:Ie,className:"icon-item",key:"".concat(t.name,"-").concat(t.id),title:t.name},s.a.createElement("div",{className:"dragbox","data-name":t.name,"data-xml":Ce(t.show_svg),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd},s.a.createElement("div",{className:"icon-item-svg",dangerouslySetInnerHTML:{__html:Ce(t.show_svg)}})))})),_=E.length||this.showDefaultIcon?s.a.createElement(Y.a,{className:"icon-list",bordered:!1},s.a.createElement(De,{loadMore:this.loadIconItems,hasMore:m},E.length?E:this.showDefaultIcon&&f)):s.a.createElement(De,{loadMore:this.loadIconItems,hasMore:m},w);o=s.a.createElement("div",{className:"library-detail global-search"},_)}return n&&n.params&&(c=n.params.tab),s.a.createElement("div",null,s.a.createElement("div",{className:"main",ref:this.handleRef},s.a.createElement(ee.a,{animated:!1,className:"icon-tabs",defaultActiveKey:c||"0",onChange:ne()(this.onChangeSearchType,400)},s.a.createElement(Ee,{tab:window.ks_i18n.Icon,key:"0"},s.a.createElement("div",null,s.a.createElement(H.a,{style:{width:"100%"},value:d,onChange:this.onChangeKeyword,placeholder:window.ks_i18n["Input key words please..."],allowClear:!0},s.a.createElement(_e,null)),s.a.createElement("div",{className:"content"},o),s.a.createElement(ge,{external:s.a.createElement("div",{className:"my-icon-footer"},s.a.createElement("a",{onClick:function(){return window.pluginCall("open",["https://www.iconfont.cn/?from=kitchen"])}},"访问 iconfont.cn",s.a.createElement(W.a,{type:"right"})))}))),s.a.createElement(Ee,{tab:window.ks_i18n["Icon Library"],key:"1"},s.a.createElement("div",null,s.a.createElement(H.a,{style:{width:"100%"},onChange:ne()(this.onChangeKeyword.bind(this),400),placeholder:window.ks_i18n["Input key words please..."],allowClear:!0},s.a.createElement(_e,null)),s.a.createElement("div",{className:"content"},r))))))}catch(e){y.a.error(e.message),console.error(e),we.a.report("error",{type:"webview",login:a,message:e.message})}}}]),n}(s.a.Component);Ne.contextTypes={track:h.a.func};var Te=Object(m.g)(Ne),je=(n(46),n(18));function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}var Re=$.a.Search,Pe={width:"25%",textAlign:"center"},Le=function(e){var t=e;return t=t.replace("width: 1em","width: 20").replace("height: 1em","height: 20").replace("><path",'><g><rect width="1024" height="1024" opacity="0"></rect><path').replace("</svg>","</g></svg>")},Oe=function(e){N()(n,e);var t=Me(n);function n(e){var a;return b()(this,n),a=t.call(this,e),L()(C()(a),"onDragIconStart",(function(e){e.dataTransfer.setData("text",""),e.dataTransfer.clearData("text"),e.currentTarget.querySelector("svg").classList.add("drag-start")})),L()(C()(a),"onDragIconEnd",(function(e){ie(e,A.a,C()(a))})),L()(C()(a),"onFilter",(function(e){if(!e||!e.trim())return a.setState({filteredIcons:[],filterValue:""});var t=a.state.icons;t=t.filter((function(t){return-1!==t.name.toUpperCase().indexOf(e.toUpperCase())})),a.setState({filterValue:e,filteredIcons:t})})),L()(C()(a),"onBack",(function(){var e=a.props.onBack;e?e():window.location.href="#/iconfont"})),L()(C()(a),"loadIconItems",E()(v.a.mark((function e(){var t,n,o,r,c,i,l,s,u,d,f,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context.token,n=a.props,o=n.dataType,r=void 0===o?"public":o,c=n.match,i="".concat("https://www.iconfont.cn","/open/collection/detail.json?"),"my"===r&&(i="https://www.iconfont.cn/open/collection/detail.json?LG_TOKEN=".concat(t,"&")),e.next=6,U()("".concat(i).concat(oe()({id:c.params.id})));case 6:if(l=e.sent,200===(s=l.data).code){e.next=10;break}return e.abrupt("return",console.error(s));case 10:u=s.data,d=u.icons,f=void 0===d?[]:d,m=u.collection,a.setState({collection:m,icons:f,dataSource:Array.from(new Set(f.map((function(e){return e.name})))),isInitial:!1});case 13:case"end":return e.stop()}}),e)})))),a.state={isInitial:!0,collection:{},dataSource:[],icons:[],filteredIcons:[],filterValue:""},a}return x()(n,[{key:"componentDidMount",value:function(){this.asyncfn=this.loadIconItems().catch((function(e){return console.error(e)}))}},{key:"componentWillUnmount",value:function(){this.asyncfn&&this.asyncfn.cancel&&this.asyncfn.cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.icons,a=t.collection,o=t.dataSource,r=t.filteredIcons,c=t.filterValue,i=t.isInitial,l=[],u=n,d=s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(Z.a,null));(r.length||c)&&(u=r);var f=u.length,m=f%4||4,p=Math.ceil(f/4);return u.forEach((function(t,n){l.push(s.a.createElement(Y.a.Grid,{style:Pe,className:{"icon-item":!0,"in-last-row":f-n<=m,"left-bottom":f-n<=m&&4*(p-1)===n,"right-bottom":f===n+1&&4===m},key:"".concat(t.id,"-").concat(t.unicode),"data-name":t.name,title:t.name},s.a.createElement("div",{className:"dragbox","data-name":t.name,"data-xml":Le(t.show_svg),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd},s.a.createElement("div",{className:"icon-item-svg",dangerouslySetInnerHTML:{__html:Le(t.show_svg)}}))))})),s.a.createElement("div",{className:"library-detail"},s.a.createElement("div",{className:"title"},s.a.createElement(je.a,{className:"back-trigger",icon:"arrow-left",size:"small",onClick:this.onBack}),a.name||s.a.createElement("span",null," ")),s.a.createElement(H.a,{className:"filter",dataSource:c?o:[],allowClear:!0,placeholder:"search",onChange:this.onFilter,filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())}},s.a.createElement(Re,null)),s.a.createElement(Y.a,{title:null,className:"icon-list",bordered:!1},i?d:l),s.a.createElement(ge,null))}}]),n}(s.a.Component);Oe.contextTypes={token:h.a.string};var Ue=Oe,ze=n(33),Fe=n.n(ze),Ae=(n(107),n(34));n(645);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}window.pluginCall=A.a;var Ke=$.a.Search,Ge={width:"25%",textAlign:"center"},Ve=function(e){var t=e;return t=t.replace("width: 1em","width: 20").replace("height: 1em","height: 20").replace(/viewBox="[^"]*/,'viewBox="0 0 1024 1024').replace("><path",'><g><rect width="1024" height="1024" opacity="0"></rect><path').replace("</svg>","</g></svg>")},qe=function(e){N()(n,e);var t=Be(n);function n(e){var a;return b()(this,n),a=t.call(this,e),L()(C()(a),"onDragIconStart",(function(e){e.dataTransfer.setData("text",""),e.dataTransfer.clearData("text"),e.currentTarget.querySelector("svg").classList.add("drag-start")})),L()(C()(a),"onDragIconEnd",(function(e){ie(e,A.a,C()(a))})),L()(C()(a),"getIcons",(function(){var e=a.props,t=e.dataUrl,n=e.keyword;t&&U.a.get(t).then((function(e){var t=e.data;200===t.code?a.setState({loading:!1,originIcons:n?t.data[n]:t.data,icons:n?t.data[n]:t.data}):a.setState({loading:!1})}))})),L()(C()(a),"filter",(function(e){var t=e.target.value,n=a.state.originIcons;if(t){var o=Fe()(n).filter((function(e){return new RegExp(t,"ig").test(e.name)}));a.setState({searchValue:t,icons:Fe()(o)})}else a.setState({icons:Fe()(n)})})),a.state={searchValue:"",originIcons:e.icons?Fe()(e.icons):[],icons:e.icons?Fe()(e.icons):[],loading:!!e.dataUrl},a}return x()(n,[{key:"componentDidMount",value:function(){this.props.icons||this.getIcons()}},{key:"renderIcons",value:function(){var e=this.props.icons;return e||this.state.icons}},{key:"render",value:function(){var e=this,t="icon-list",n=this.props,a=n.placeholder,o=n.noSearch,r=this.state,c=r.loading,i=r.searchValue,l=this.renderIcons(),u=l.map((function(t){return s.a.createElement(Y.a.Grid,{style:Ge,className:"icon-item",key:"".concat(t.name,"-").concat(t.id)},s.a.createElement("div",{className:"dragbox","data-name":t.name,"data-xml":Ve(t.show_svg),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd,title:t.name},s.a.createElement("div",{className:"icon-item-svg",dangerouslySetInnerHTML:{__html:Ve(t.show_svg)}})))}));return s.a.createElement("div",{className:"".concat(t,"-container")},s.a.createElement(Z.a,{spinning:c},!o&&s.a.createElement(Ke,{className:"".concat(t,"-search"),placeholder:a,onChange:this.filter,style:{width:"100%"}}),!c&&l.length<1&&s.a.createElement("div",{className:"".concat(t,"-not-found")},s.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/ByduwOJasddKCrSJxhmr.svg",alt:"not found"}),i?s.a.createElement("p",null,"".concat(window.ks_i18n["Sorry, not found"],' "').concat(i,'" ').concat(window.ks_i18n["related info"])):s.a.createElement("p",null,window.ks_i18n["No content yet"])),l.length>0&&s.a.createElement("div",{className:"".concat(t,"-content")},s.a.createElement(Y.a,{className:"icon-list",bordered:!1},u))))}}]),n}(s.a.Component);qe.contextTypes={track:h.a.func};var Je=qe;function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}window.pluginCall=A.a;var He=$.a.Search,Xe=Ae.a.Option,Qe=Ae.a.OptGroup,Ye=function(e){N()(n,e);var t=We(n);function n(e){var a;return b()(this,n),a=t.call(this,e),L()(C()(a),"getProject",(function(){U.a.get(a.projectUrl).then((function(e){var t=e.data;if(200===t.code){var n=a.getLastIconProject(t.data);a.setState({currentProject:n||t.data.selectedId,ownProjects:t.data.ownProjects,corpProjects:t.data.corpProjects},(function(){a.getIcons()}))}}))})),L()(C()(a),"getIcons",(function(){var e=a.state.currentProject;U.a.get("".concat(a.iconsUrl,"&pid=").concat(e)).then((function(e){var t=e.data;200===t.code?a.setState({loading:!1,originIcons:Fe()(t.data.icons),icons:Fe()(t.data.icons)}):a.setState({loading:!1})}))})),L()(C()(a),"getLastIconProject",(function(e){var t=window.ks_lastIconProject,n=Fe()(e.ownProjects),a=Fe()(e.corpProjects);return n.concat(a).filter((function(e){return e.id===t}))[0]?t:null})),L()(C()(a),"setLastIconProject",(function(e){window.pluginCall("setLastIconProject",[e])})),L()(C()(a),"handleOnChange",(function(e){a.setLastIconProject(e),a.setState({loading:!0,currentProject:e},(function(){a.getIcons()}))})),L()(C()(a),"filter",(function(e){var t=e.target.value,n=a.state.originIcons;if(t){var o=Fe()(n).filter((function(e){return new RegExp(t,"ig").test(e.name)}));a.setState({icons:Fe()(o)})}else a.setState({icons:Fe()(n)})})),a.projectUrl="https://www.iconfont.cn/open/user/myprojects.json?LG_TOKEN=".concat(e.token),a.iconsUrl="https://www.iconfont.cn/open/project/detail.json?LG_TOKEN=".concat(e.token),a.state={loading:!0,originIcons:[],icons:[],ownProjects:[],corpProjects:[]},a}return x()(n,[{key:"componentDidMount",value:function(){this.getProject()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.icons,a=e.currentProject,o=e.ownProjects,r=e.corpProjects,c=s.a.createElement(Qe,{label:window.ks_i18n["My projects"]},o.map((function(e){return s.a.createElement(Xe,{key:e.id,value:e.id},e.name)}))),i=s.a.createElement(Qe,{label:window.ks_i18n["Joined projects"]},r.map((function(e){return s.a.createElement(Xe,{key:e.id,value:e.id},e.name)}))),l="https://www.iconfont.cn/manage/index?manage_type=myprojects";a&&(l+="&projectId=".concat(a));var u=s.a.createElement("div",{className:"my-icon-footer"},s.a.createElement("a",{onClick:function(){return window.pluginCall("open",[l])}},window.ks_i18n["My projects"]," ",s.a.createElement(W.a,{type:"right"})));return s.a.createElement("div",{className:"".concat("icon-project","-container")},s.a.createElement(Z.a,{spinning:t},s.a.createElement($.a.Group,{compact:!0},s.a.createElement(Ae.a,{showSearch:!0,optionFilterProp:"children",style:{width:120},value:a,onChange:this.handleOnChange,dropdownMatchSelectWidth:!1,dropdownStyle:{maxWidth:"calc(100vw - 24px)",maxHeight:"100vh"}},c,i),s.a.createElement(He,{placeholder:window.ks_i18n["Search icons in the project"],onChange:this.filter,style:{width:"calc(100% - 120px)"}})),!t&&s.a.createElement("div",{style:{marginTop:8}},s.a.createElement(Je,{icons:n,noSearch:!0}))),s.a.createElement(ge,{external:u}))}}]),n}(s.a.Component);n(646);function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var o=R()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}var $e=$.a.Search;window.pluginCall=A.a;var et=function(e){var t=e.children,n=e.hasMore,a=e.loadMore;return s.a.createElement(ce.a,{threshold:250,useWindow:!1,pageStart:0,loader:s.a.createElement("div",null,s.a.createElement(Z.a,{style:{marginTop:16}})),loadMore:a,hasMore:n,className:"scroll-container"},t)},tt=function(e){N()(n,e);var t=Ze(n);function n(){var e;b()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),L()(C()(e),"state",{loading:!0,originCollections:[],searchValue:"",collections:[]}),L()(C()(e),"onDragIconStart",(function(e){e.dataTransfer.setData("text",""),e.dataTransfer.clearData("text"),e.currentTarget.querySelector("svg").classList.add("drag-start")})),L()(C()(e),"onDragIconEnd",(function(t){ie(t,A.a,C()(e))})),L()(C()(e),"getProject",(function(){var t=e.props.url,n=e.context.token;U.a.get("".concat(t,"?LG_TOKEN=").concat(n)).then((function(t){var n=t.data;if(200===n.code){var a=[];n.data.collections?a=n.data.collections:n.data.lists&&(a=n.data.lists),e.setState({collections:Fe()(a),originCollections:Fe()(a),loading:!1})}else e.setState({loading:!1})}))})),L()(C()(e),"filter",(function(t){var n=t.target.value,a=e.state.originCollections;if(n){var o=Fe()(a).filter((function(e){return new RegExp(n,"ig").test(e.name)}));e.setState({collections:Fe()(o),searchValue:n})}else e.setState({collections:Fe()(a),searchValue:""})})),e}return x()(n,[{key:"componentDidMount",value:function(){this.getProject()}},{key:"render",value:function(){var e=this,t="icon-library",n=this.props.history,a=this.state,o=a.loading,r=a.collections,c=a.searchValue,i=s.a.createElement("div",{className:"".concat(t,"-not-found")},s.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/ByduwOJasddKCrSJxhmr.svg",alt:"not found"}),c?s.a.createElement("p",null,"".concat(window.ks_i18n["Sorry, not found"],' "').concat(c,'" ').concat(window.ks_i18n["related info"])):s.a.createElement("p",null,"暂时没有内容")),l=[];r.forEach((function(t){var a=[];t.icons.forEach((function(t,n){if(n>11)return!1;a.push(s.a.createElement(Q.a,{className:"icon-cell",span:6,key:"".concat(t.name,"-").concat(n+1),draggable:!0,onDragStart:e.onDragIconStart,onDragEnd:e.onDragIconEnd,"data-name":t.name,"data-xml":t.show_svg,dangerouslySetInnerHTML:{__html:t.show_svg}}))})),a.length&&l.push(s.a.createElement(Q.a,{span:12,key:"".concat(t.id,"-").concat(t.name)},s.a.createElement(Y.a,{onClick:function(){n.push("/detail/".concat(t.id))},bordered:!1,className:"track",title:t.name},s.a.createElement(X.a,{gutter:6,className:"icon-table"},a))))}));var u=s.a.createElement(et,{hasMore:!1,loadMore:function(){}},l.length?s.a.createElement(X.a,{className:"tracks",gutter:6},l):i);return s.a.createElement("div",{className:"".concat(t,"-container")},s.a.createElement(Z.a,{spinning:o},s.a.createElement($e,{className:"".concat(t,"-search"),placeholder:window.ks_i18n["Search in my icon libraries"],onChange:this.filter,style:{width:"100%",marginBottom:8}}),s.a.createElement("div",{className:"content"},u)),s.a.createElement("div",{className:"my-icon-footer",style:{left:0}},s.a.createElement("a",{onClick:function(){return window.pluginCall("open",["https://www.iconfont.cn/manage/index?manage_type=myicons&icontype=collections"])}},window.ks_i18n["Manage my icon libraries"]," ",s.a.createElement(W.a,{type:"right"}))))}}]),n}(s.a.Component);tt.contextTypes={track:h.a.func,token:h.a.string};var nt=Object(m.g)(tt),at=(n(134),n(43)),ot=(n(647),function(e,t){var n,a,o=e.match,r=e.history,c=t.token;return o.params.type&&"libraries"===o.params.type?(n="libraries",a=s.a.createElement(nt,{url:"https://www.iconfont.cn/open/user/myCollectionFavorite.json"})):(n="icons",a=s.a.createElement(s.a.Fragment,null,s.a.createElement(Je,{keyword:"favorites",dataUrl:"https://www.iconfont.cn/open/user/myfavorites.json?LG_TOKEN=".concat(c),placeholder:window.ks_i18n["Search in my collections"],height:360}),s.a.createElement(ge,{external:s.a.createElement("div",{className:"my-icon-footer"},s.a.createElement("a",{onClick:function(){return window.pluginCall("open",["https://www.iconfont.cn/manage/index?manage_type=mylikes&from=kitchen"])}},window.ks_i18n["Manage my collections"]," ",s.a.createElement(W.a,{type:"right"})))}))),s.a.createElement(s.a.Fragment,null,s.a.createElement(at.a.Group,{value:n,size:"small",className:"favorited-radio",onChange:function(e){return console.log("/favorited/".concat(e.target.value))||r.push("/favorited/".concat(e.target.value))}},s.a.createElement(at.a.Button,{value:"icons"},window.ks_i18n["Favorited icons"]),s.a.createElement(at.a.Button,{value:"libraries"},window.ks_i18n["Favorited libraries"])),s.a.createElement("div",{className:"favorited-panel"},a))});ot.contextTypes={token:h.a.string};var rt=ot,ct=(n(648),ee.a.TabPane),it=function(e,t){var n=e.match,a=e.history,o=n.params.tab,r=void 0===o?"project":o,c=t.token;return"my"!==r&&"iconfont"!==r||(r="project"),s.a.createElement(ee.a,{animated:!1,className:"icon-tabs",activeKey:r,onChange:function(e){a.push("/".concat(e))}},s.a.createElement(ct,{tab:window.ks_i18n.Project,key:"project"},s.a.createElement(Ye,{token:c})),s.a.createElement(ct,{tab:window.ks_i18n.Icon,key:"icon"},s.a.createElement(Je,{keyword:"icons",dataUrl:"https://www.iconfont.cn/open/user/myuploads.json?LG_TOKEN=".concat(c),placeholder:window.ks_i18n["Search in my icons"],height:360}),s.a.createElement(ge,{external:s.a.createElement("div",{className:"my-icon-footer"},s.a.createElement("a",{onClick:function(){return window.pluginCall("open",["https://www.iconfont.cn/manage/index?manage_type=myicons&from=kitchen"])}},window.ks_i18n["Manage my icons"]," ",s.a.createElement(W.a,{type:"right"})))})),s.a.createElement(ct,{tab:window.ks_i18n["Icon Library"],key:"library"},s.a.createElement(nt,{url:"https://www.iconfont.cn/open/user/mycollections.json"})),s.a.createElement(ct,{tab:window.ks_i18n.Favorited,key:"favorited"},s.a.createElement(m.d,null,s.a.createElement(m.b,{path:"/favorited/:type",component:rt}),s.a.createElement(m.a,{from:"/favorited",to:"/favorited/icons"}))))};it.contextTypes={token:h.a.string};var lt=it;window.ks_iconfont_color=window.localStorage.getItem("ks_iconfont_color")||"rgba(0, 0, 0, 0)",window.ks_iconfont_size=window.localStorage.getItem("ks_iconfont_size")||16;var st=function(e){return s.a.createElement(Ue,i()({onBack:function(){window.location.href="#/iconfont/1"}},e))},ut=function(){return s.a.createElement("main",null,s.a.createElement(f.a,null,s.a.createElement(m.d,null,s.a.createElement(m.b,{path:"/iconfont/:tab",component:Te}),s.a.createElement(m.b,{path:"/iconfont",component:Te}),s.a.createElement(m.b,{path:"/detail/:id",component:st}))))},dt=function(e){var t=e.appsecret,n=e.token;return s.a.createElement(V,{ui:{logo:"https://gw.alipayobjects.com/zos/rmsportal/mkFgIWuVvbjGhoindvEg.svg",description:window.ks_i18n["Quickly search and use icon and drag it directly to Sketch for modification and use"],okText:window.ks_i18n["Iconfont authorize"],hint:window.ks_i18n["If shows uuid illegal, please login at iconfont.cn ahead and come back to authorize"],extraInfo:{text:window.ks_i18n["Visit Iconfont homepage"],href:"https://www.iconfont.cn"}},appsecret:t,token:n,authUrl:"https://www.iconfont.cn/open/auth",checkUrl:"https://www.iconfont.cn/open/auth/check"},s.a.createElement(f.a,null,s.a.createElement(m.d,null,s.a.createElement(m.b,{path:"/detail/:id",component:function(e){return s.a.createElement(Ue,i()({dataType:"my",onBack:function(){window.history.back()}},e))}}),s.a.createElement(m.b,{path:"/:tab",component:lt}),s.a.createElement(m.b,{path:"/",component:lt}))))},ft=function(e,t){var n=e.withoutToolbar,a=r()(e,["withoutToolbar"]);return s.a.createElement("div",null,s.a.createElement(J.a,{defaultActiveKey:"iconfont",withoutToolbar:n,isLink:!0,data:[{id:"iconfont",title:window.ks_i18n.Iconfont,content:s.a.createElement(ut,null)},{id:"my",title:window.ks_i18n["My projects"],content:s.a.createElement(dt,a)}],onChange:function(e){t.track({action:"my"===e?"我的项目":"打开 Iconfont 图标"})}}))};ft.contextTypes={track:h.a.func};var mt=Object(g.a)(ft,"图标");window.location.href="#/iconfont",window.init=function(e){var t=e.trackData,n=e.login,a=e.userId,o=e.lastIconProject;if(window._kitchen_iconfont_isInit&&window.Tracert&&window.Tracert.click("iconfont.pageView",{UUID:t.cnzzUUID}),window.__WPO&&window.__WPO.setConfig({nick:n||a,sample:1,spmId:"a412.b4420",imgUrl:"http://retcode.taobao.com/r.png?"}),window.ks_lastIconProject=o,!window._kitchen_iconfont_isInit){var r=e.isDev;(r="true"===r||"1"===r)||Object(q.a)(),window._kitchen_iconfont_isInit=!0,d.a.render(s.a.createElement(mt,e),document.getElementById("kitchen-plugin-root"))}}},8:function(e,t){e.exports=ReactDOM}});