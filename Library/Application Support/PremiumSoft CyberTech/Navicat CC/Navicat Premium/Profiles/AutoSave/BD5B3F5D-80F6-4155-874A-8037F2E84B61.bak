SELECT
	t.project_id,
	t.role_id,
	GROUP_CONCAT(
		DISTINCT t.user_id 
	ORDER BY
		t.user_id SEPARATOR ',' 
	) AS user_ids,
	GROUP_CONCAT(
		DISTINCT u.user_name 
	ORDER BY
		u.user_id SEPARATOR ',' 
	) AS user_names 
FROM
	(
	SELECT
		gub.scope_id AS project_id,
		grb.role_id,
		gub.user_id 
	FROM
		ai_group_role_binding grb,
		ai_group_user_binding gub 
	WHERE
		grb.group_id = gub.group_id 
		AND grb.valid_flag = 1 
		AND gub.valid_flag = 1 
		AND gub.scope_type = 'PROJECT' UNION
	SELECT
		rub.scope_id AS project_id,
		rub.role_id,
		rub.user_id 
	FROM
		ai_role_user_binding rub 
	WHERE
		rub.valid_flag = 1 
		AND rub.scope_type = 'PROJECT' 
	) T
	INNER JOIN ai_user U ON T.user_id = U.user_id 
	AND U.TENANT_ID = 'default'
GROUP BY
	project_id,
	role_id